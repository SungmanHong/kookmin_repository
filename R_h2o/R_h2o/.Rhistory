library(h2o)
full_data <- read.csv('full_data.csv', encoding = 'UTF-8')
head(full_data)
full_data <- read.csv('full_data.csv', encoding = 'EUC-KR')
head(full_data)
?subset
full_data.A_5
full_data[,'A_5']'
full_data[,'A_5']
full_data['A_5']
colnames(full_data)
subset(full_data, (W_3 = '26형' & (W_14 = '우(고)' | W_14 = '일(고)' | W_14 = 'N(고)')), select = c(Ozone, Temp))
full_data.W_14
full_data[,'W_14']
subset(full_data, (W_3 = '26형' & (W_14 = '우(고)' || W_14 = '일(고)' || W_14 = 'N(고)')), select = c(Ozone, Temp))
subset(full_data, (W_3 = '26형' AND  (W_14 = '우(고)' OR  W_14 = '일(고)' OR W_14 = 'N(고)')), select = c(Ozone, Temp))
subset(full_data, (W_3 = '26형' &  (W_14 = '우(고)' OR  W_14 = '일(고)' OR W_14 = 'N(고)')), select = c(Ozone, Temp))
subset(full_data, W_3 = '26형' &  (W_14 = '우(고)' |  W_14 = '일(고)' | W_14 = 'N(고)'))
nrow(subset(full_data, W_3 = '26형' &  (W_14 = '우(고)' |  W_14 = '일(고)' | W_14 = 'N(고)')))
## 고령자 highage_26 <- subset(full_data, W_3 = '26형' & (W_14 = '우(고)' | W_14 = '일(고)' | W_14 = 'N(고)')) highage_36 <- subset(full_data, W_3 = '36형' & (W_14 = '우(고)' | W_14 = '일(고)' | W_14 = 'N(고)')) highage_46 <- subset(full_data, W_3 = '46형' & (W_14 = '우(고)' | W_14 = '일(고)' | W_14 = 'N(고)')) ## 장애인 disabled_26 <- subset(full_data, W_3 = '26형' & (W_14 = '우(장)' | W_14 = '일(장)' | W_14 = 'N(장)')) disabled_36 <- subset(full_data, W_3 = '36형' & (W_14 = '우(장)' | W_14 = '일(장)' | W_14 = 'N(장)')) disabled_46 <- subset(full_data, W_3 = '46형' & (W_14 = '우(장)' | W_14 = '일(장)' | W_14 = 'N(장)')) ## 신혼부부 married_46 <- subset(full_data, W_3 = '46형' & (W_14 = '우(신)' | W_14 = '일(신)' | W_14 = 'N(신)')) ## 일반공급 general_26 <- subset(full_data, W_3 = '26형' & (W_14 = 'N(일)' | W_14 = '일(일)' )) general_36 <- subset(full_data, W_3 = '36형' & (W_14 = 'N(일)' | W_14 = '일(일)')) general_46 <- subset(full_data, W_3 = '46형' & (W_14 = 'N(일)' | W_14 = '일(일)'))
highage_26 <- subset(full_data, W_3 = '26형' & (W_14 = '우(고)' | W_14 = '일(고)' | W_14 = 'N(고)'))
highage_46 <- subset(full_data, W_3 = '46형' & (W_14 = '우(고)' | W_14 = '일(고)' | W_14 = 'N(고)'))
highage_26 <- subset(full_data, W_3 = '26형' & (W_14 = '우(고)' | W_14 = '일(고)' | W_14 = 'N(고)'))
highage_36 <- subset(full_data, W_3 = '36형' & (W_14 = '우(고)' | W_14 = '일(고)' | W_14 = 'N(고)'))
highage_46 <- subset(full_data, W_3 = '46형' & (W_14 = '우(고)' | W_14 = '일(고)' | W_14 = 'N(고)'))
disabled_26 <- subset(full_data, W_3 = '26형' & (W_14 = '우(장)' | W_14 = '일(장)' | W_14 = 'N(장)'))
disabled_36 <- subset(full_data, W_3 = '36형' & (W_14 = '우(장)' | W_14 = '일(장)' | W_14 = 'N(장)'))
disabled_46 <- subset(full_data, W_3 = '46형' & (W_14 = '우(장)' | W_14 = '일(장)' | W_14 = 'N(장)'))
married_46 <- subset(full_data, W_3 = '46형' & (W_14 = '우(신)' | W_14 = '일(신)' | W_14 = 'N(신)'))
general_26 <- subset(full_data, W_3 = '26형' & (W_14 = 'N(일)' | W_14 = '일(일)' ))
general_36 <- subset(full_data, W_3 = '36형' & (W_14 = 'N(일)' | W_14 = '일(일)'))
general_46 <- subset(full_data, W_3 = '46형' & (W_14 = 'N(일)' | W_14 = '일(일)'))
write.csv(higeage_26, '고령자_26형.csv') 
write.csv(highage_26, '고령자_26형.csv')
write.csv(highage_26, '고령자_26형.csv', fileEncoding = 'UTF-8')
write.csv(highage_36, '고령자_36형.csv', fileEncoding = 'UTF-8')
write.csv(highage_46, '고령자_46형.csv', fileEncoding = 'UTF-8')
write.csv(disabled_26, '장애인_26형.csv', fileEncoding = 'UTF-8')
write.csv(disabled_36, '장애인_36형.csv', fileEncoding = 'UTF-8')
write.csv(disabled_46, '장애인_46형.csv', fileEncoding = 'UTF-8')
write.csv(married_46, '신혼부부_46형.csv', fileEncoding = 'UTF-8')
write.csv(general_26, '일반공급_26형.csv', fileEncoding = 'UTF-8')
write.csv(general_26, '일반공급_36형.csv', fileEncoding = 'UTF-8')
write.csv(general_26, '일반공급_46형.csv', fileEncoding = 'UTF-8')
rm(list=())
rm(list=)
rm(list=(all))
?rm
rm(list =.GlobalEnv)
rm(list =.GlobalEnv)
rm(list() rm(list())
rm(list())
rm(list=ls())
library(h2o)
disabled_26 <- h2o.importFile(path = normalizePath('고령자_26형.csv'))
h2o.init(nthreads = -1, max_mem_size = "2G")
h2o.removeAll() ## clean slate - just in case the cluster was already running
disabled_26 <- h2o.importFile(path = normalizePath('고령자_26형.csv'))
disabled_26 <- h2o.importFile(path = normalizePath('고령자_26형.csv'), encodeString='UTF-8')
?h2o.importFile
full_data <- read.csv('full_data.csv', encoding = 'EUC-KR') head(full_data) ## 고령자 highage_26 <- subset(full_data, W_3 = '26형' & (W_14 = '우(고)' | W_14 = '일(고)' | W_14 = 'N(고)')) highage_36 <- subset(full_data, W_3 = '36형' & (W_14 = '우(고)' | W_14 = '일(고)' | W_14 = 'N(고)')) highage_46 <- subset(full_data, W_3 = '46형' & (W_14 = '우(고)' | W_14 = '일(고)' | W_14 = 'N(고)')) write.csv(highage_26, 'highage_26.csv', fileEncoding = 'UTF-8') write.csv(highage_36, 'highage_36.csv', fileEncoding = 'UTF-8') write.csv(highage_46, 'highage_46.csv', fileEncoding = 'UTF-8') ## 장애인 disabled_26 <- subset(full_data, W_3 = '26형' & (W_14 = '우(장)' | W_14 = '일(장)' | W_14 = 'N(장)')) disabled_36 <- subset(full_data, W_3 = '36형' & (W_14 = '우(장)' | W_14 = '일(장)' | W_14 = 'N(장)')) disabled_46 <- subset(full_data, W_3 = '46형' & (W_14 = '우(장)' | W_14 = '일(장)' | W_14 = 'N(장)')) write.csv(disabled_26, 'disabled_26.csv', fileEncoding = 'UTF-8') write.csv(disabled_36, 'disabled_36.csv', fileEncoding = 'UTF-8') write.csv(disabled_46, 'disabled_46.csv', fileEncoding = 'UTF-8') ## 신혼부부 married_46 <- subset(full_data, W_3 = '46형' & (W_14 = '우(신)' | W_14 = '일(신)' | W_14 = 'N(신)')) write.csv(married_46, 'married_46.csv', fileEncoding = 'UTF-8') ## 일반공급 general_26 <- subset(full_data, W_3 = '26형' & (W_14 = 'N(일)' | W_14 = '일(일)' )) general_36 <- subset(full_data, W_3 = '36형' & (W_14 = 'N(일)' | W_14 = '일(일)')) general_46 <- subset(full_data, W_3 = '46형' & (W_14 = 'N(일)' | W_14 = '일(일)')) write.csv(general_26, 'general_26.csv', fileEncoding = 'UTF-8') write.csv(general_26, 'general_36.csv', fileEncoding = 'UTF-8') write.csv(general_26, 'general_46.csv', fileEncoding = 'UTF-8')
married_46 <- subset(full_data, W_3 = '46형' & (W_14 = '우(신)' | W_14 = '일(신)' | W_14 = 'N(신)'))
write.csv(married_46, 'married_46.csv', fileEncoding = 'UTF-8')
nrow(married_46)
nrow(highage_36)
head(full_data)
subset(full_data, W_3 = '26형' & (W_14 = '우(고)' | W_14 = '일(고)' | W_14 = 'N(고)'))
?subset
nrow(subset(full_data, W_3 == '26형' & (W_14 == '우(고)' | W_14 == '일(고)' | W_14 == 'N(고)')))
full_data <- read.csv('full_data.csv', encoding == 'EUC-KR') head(full_data) ## 고령자 ?subset highage_26 <- subset(full_data, W_3 == '26형' & (W_14 == '우(고)' | W_14 == '일(고)' | W_14 == 'N(고)')) highage_36 <- subset(full_data, W_3 == '36형' & (W_14 == '우(고)' | W_14 == '일(고)' | W_14 == 'N(고)')) highage_46 <- subset(full_data, W_3 == '46형' & (W_14 == '우(고)' | W_14 == '일(고)' | W_14 == 'N(고)')) write.csv(highage_26, 'highage_26.csv', fileEncoding = 'UTF-8') write.csv(highage_36, 'highage_36.csv', fileEncoding = 'UTF-8') write.csv(highage_46, 'highage_46.csv', fileEncoding = 'UTF-8') ## 장애인 disabled_26 <- subset(full_data, W_3 == '26형' & (W_14 == '우(장)' | W_14 == '일(장)' | W_14 == 'N(장)')) disabled_36 <- subset(full_data, W_3 == '36형' & (W_14 == '우(장)' | W_14 == '일(장)' | W_14 == 'N(장)')) disabled_46 <- subset(full_data, W_3 == '46형' & (W_14 == '우(장)' | W_14 == '일(장)' | W_14 == 'N(장)')) write.csv(disabled_26, 'disabled_26.csv', fileEncoding = 'UTF-8') write.csv(disabled_36, 'disabled_36.csv', fileEncoding = 'UTF-8') write.csv(disabled_46, 'disabled_46.csv', fileEncoding = 'UTF-8') ## 신혼부부 married_46 <- subset(full_data, W_3 == '46형' & (W_14 == '우(신)' | W_14 == '일(신)' | W_14 == 'N(신)')) write.csv(married_46, 'married_46.csv', fileEncoding = 'UTF-8') ## 일반공급 general_26 <- subset(full_data, W_3 == '26형' & (W_14 == 'N(일)' | W_14 == '일(일)' )) general_36 <- subset(full_data, W_3 == '36형' & (W_14 == 'N(일)' | W_14 == '일(일)')) general_46 <- subset(full_data, W_3 == '46형' & (W_14 == 'N(일)' | W_14 == '일(일)')) write.csv(general_26, 'general_26.csv', fileEncoding = 'UTF-8') write.csv(general_26, 'general_36.csv', fileEncoding = 'UTF-8') write.csv(general_26, 'general_46.csv', fileEncoding = 'UTF-8')
rm(list = ls())
library(h2o)
h2o.init(nthreads = -1, max_mem_size = "2G")
h2o.removeAll() ## clean slate - just in case the cluster was already running
disabled_26 <- h2o.importFile(path = normalizePath('highage_26.csv'))
splits <- h2o.splitFrame(disabled_26, c(0.6, 0.2), seed = 1234)
splits <- h2o.splitFrame(disabled_26, c(0.6, 0.2), seed = 1234)
train <- h2o.assign(splits[[1]], "train.hex") # 60%
valid <- h2o.assign(splits[[1]], "valid.hex") # 60%
test <- h2o.assign(splits[[1]], "test.hex") # 60%
par(mfrow = c(1, 1)) # reset canvas
plot(h2o.tabulate(disabled_26, "Elevation", "Cover_Type"))
plot(h2o.tabulate(disabled_26, "Horizontal_Distance_To_Roadways", "Cover_Type"))
plot(h2o.tabulate(disabled_26, "Soil_Type", "Cover_Type"))
plot(h2o.tabulate(disabled_26, "Horizontal_Distance_To_Roadways", "Elevation"))
response = 'W_4' # 당첨/탈락 여부 필드
predictors <- setdiff(names(disabled_26), response)
predictors
names(disabled_26)
setdiff(names(disabled_26), response)
setdiff(names(disabled_26), response)
predictors
m1 <- h2o.deeplearning(   model_id = "dl_model_first",   training_frame = train,   validation_frame = valid, ## validation dataset: used for scoring and early stopping   x = predictors,   y = response,   #activation="Rectifier",  ## default   #hidden=c(200,200),       ## default: 2 hidden layers with 200 neurons each   epochs = 1,   variable_importances = T ## not enabled by default )
summary(m1)
head(disabled_26)
?h2o.importFile
prosPath = system.file("extdata", "highage_26.csv", package = "h2o")
prostate.hex = h2o.importFile(path = prosPath)
prosPath
prosPath = system.file("extdata", "highage_26.csv", package = "h2o")
disabled_26 <- h2o.importFile(path = normalizePath('highage_26.csv'))
disabled_26 <- h2o.importFile(path = normalizePath('highage_26.csv'))
disabled_26
highage_26 <- h2o.importFile(path = normalizePath('highage_26.csv'))
highage_26 <- h2o.importFile(path = normalizePath('highage_26.csv'))
highage_26
fix.encoding <- function(df, originalEncoding = "latin1") {     numCols <- ncol(df)     for (col in 1:numCols)         Encoding(df[, col]) <- originalEncoding     return(df) }
fix.encoding(highage_26)
fix.encoding <- function(df, originalEncoding = "UTF-8") {     numCols <- ncol(df)     for (col in 1:numCols)         Encoding(df[, col]) <- originalEncoding     return(df) }
fix.encoding(highage_26)
fix.encoding <- function(df, originalEncoding = "UTF-8") {     numCols <- ncol(df)     for (col in 1:numCols)         encodeString(df[, col]) <- originalEncoding     return(df) }
fix.encoding(highage_26)
options(encoding='utf-8')
prosPath = system.file("extdata", "highage_26.csv", package = "h2o")
highage_26 <- h2o.importFile(path = normalizePath('highage_26.csv'))
highage_26
fix.encoding <- function(df, originalEncoding = "UTF-8") {     numCols <- ncol(df)     for (col in 1:numCols)         Encoding(df$col]) <- originalEncoding     return(df) } fix.encoding(highage_26) fix.encoding <- function(df, originalEncoding = "UTF-8") {     numCols <- ncol(df)     for (col in 1:numCols)         Encoding(df$col) <- originalEncoding     return(df) } fix.encoding <- function(df, originalEncoding = "UTF-8") {     numCols <- ncol(df)     for (col in 1:numCols)         Encoding(df$col) <- originalEncoding     return(df) } fix.encoding(highage_26) ## data 분리 splits <- h2o.splitFrame(disabled_26, c(0.6, 0.2), seed = 1234) train <- h2o.assign(splits[[1]], "train.hex") # 60% }
fix.encoding <- function(df, originalEncoding = "UTF-8") {     numCols <- ncol(df)     for (col in 1:numCols)         Encoding(df$col) <- originalEncoding     return(df) }
fix.encoding(highage_26)
highage_26 <- h2o.importFile(path = normalizePath('highage_26.csv'), fileEncoding='utf-8')
highage_26
?h2o.importFile
highage_26 <- h2o.importFile(path = normalizePath('highage_26.csv'), sep = ",", parse=TRUE, fileEncoding = 'utf-8')
highage_26 <- h2o.importFile(path = normalizePath('highage_26.csv'), sep = ",", parse=TRUE)
highage_26
highage_26 <- h2o.importFile(path = normalizePath('highage_26.csv'), sep = ",", parse = TRUE, parse_type="CSV")
highage_26 <- h2o.importFile(path = normalizePath('highage_26.csv'), sep = ",", parse = TRUE, parse_type='CSV')
highage_26 <- read.csv('highage_26.csv', encoding = 'UTF-8')
highage_26 <- read.csv('highage_26.csv', encoding = 'UTF-8')
highage_26 <- subset(full_data, W_3 == '26형' & (W_14 == '우(고)' | W_14 == '일(고)' | W_14 == 'N(고)'))
full_data <- read.csv('full_data.csv', encoding == 'EUC-KR')
highage_26 <- subset(full_data, W_3 == '26형' & (W_14 == '우(고)' | W_14 == '일(고)' | W_14 == 'N(고)'))
full_data <- read.csv('full_data.csv', encoding == 'EUC-KR')
full_data <- read.csv('full_data.csv', encoding = 'EUC-KR')
head(full_data)
full_data <- read.csv('full_data.csv', encoding = 'EUC-KR')
full_data <- read.csv('full_data.csv', encoding = 'UTf-8')
highage_26__ <- read.table('full_data.csv', header = TRUE)
library(h2o)
localH2O <- h2o.init(max_mem_size = '1g') ## using a max 1GB of RAM
h2o.removeAll() ## clean slate - just in case the cluster was already running
highage_26__ <- read.table('full_data.csv', header = TRUE)
highage_26__ <- read.csv('full_data.csv', header = TRUE)
as.h2o(highage_26__)
highage_26__ <- read.csv('full_data.csv', header = TRUE)
highage_26__
highage_26 <- h2o.importFile(path = 'full_data.csv')
highage_26
highage_26 <- read.csv('highage_26.csv', header = TRUE)
head(highage_26)
highage_26 <- read.table('highage_26.csv', header = TRUE)
head(highage_26)
highage_26 <- h2o.importFile(highage_26)
as.h2o(highage_26)
as.h2o
highage_26 <- h2o.importFile(path = 'highage_26.csv')
highage_26
toUTF8(highage_26)
library(descr)
toUTF8(highage_26)
highage_26 <- h2o.importFile(path = read.table('highage_26.csv', header = TRUE))
iconvlist()
x <- "0xC7FC"
Encoding(x) <- "UTF-8"
x
Encoding(x) <- "ISO_8859-2"
x
iconv(x, "latin1", "ASCII")
iconv(x, "latin1", "ASCII", "?")
iconv(x, "latin1", "ASCII", "")
iconv(x, "latin1", "ASCII", "byte")
iconv(x, "UTF-16LE", "UTF-8")
Encoding(x) <- "EUC-KR"
iconv(x, "UTF-16LE", "UTF-8")
iconv(x, "EUC-KR", "UTF-8")
Encoding(x) <- "EUC-KR"
x <- "0xC7FC"
Encoding(x) <- "EUC-KR"
iconv(x, "EUC-KR", "UTF-8")
iconv(x, "EUC-KR", "EUC-KR")
Encoding(levels(highage_26$W_4))
Encoding(highage_26$W_4)
highage_26$W_4
Encoding(highage_26$W_4)
x <- "0xC7FC"
iconv(x, "UTF-8", "UTF-16LE")
x <- "0xC7FC"
iconv(x, "UTF-8", "UTF-16LE")
iconv(x, "UTF-8", "EUC-KR")
Encoding(x) <- "EUC-KR"
x <- "0xC7FC"
Encoding(x) <- "EUC-KR"
iconv(x, "UTF-8", "EUC-KR")
x <- "0xC7FC"
iconv(x, "UTF-8", "EUC-KR")
as.data.frame(highage_26)
file('highage_26.csv', "rb")
full_data <- read.csv('full_data.csv', encoding = 'EUC-KR')
head(full_data)
subset(full_data, W_14 %in% ('우(고)', '일(고)', 'N(고)', '우(장)', '일(장)', 'N(장)', '우(신)', '일(신)', 'N(신)') ) full_data.priorty <- subset(full_data, W_14 %in% ('우(고)', '일(고)', 'N(고)', '우(장)', '일(장)', 'N(장)', '우(신)', '일(신)', 'N(신)') ) ) }
subset(full_data, W_14 %in% c('우(고)', '일(고)', 'N(고)', '우(장)', '일(장)', 'N(장)', '우(신)', '일(신)', 'N(신)') )
library(stringr)
library(dplyr)
full_data %>% filter(str_detect(W_14, "일") | str_detect(W_14, "N"))
full_data.priorty <- subset(full_data, W_14 %in% c('우(고)', '일(고)', 'N(고)', '우(장)', '일(장)', 'N(장)', '우(신)', '일(신)', 'N(신)') )
full_data.general <- full_data %>% filter(str_detect(W_14, "일") | str_detect(W_14, "N"))
summary(full_data.priorty)
nrow(full_data.general %>% filter(str_detect(REGNUM_BLOCK, "호평")))
full_data.general %>% filter(str_detect(REGNUM_BLOCK, "호평") )
library(stringr)
library(dplyr)
full_data <- read.csv('full_data.csv', encoding = 'EUC-KR')
head(full_data)
full_data.priorty <- subset(full_data, W_14 %in% c('우(고)', '일(고)', 'N(고)', '우(장)', '일(장)', 'N(장)', '우(신)', '일(신)', 'N(신)') )
full_data.general <- full_data %>% filter(str_detect(W_14, "일") | str_detect(W_14, "N"))
full_data.general %>% filter(str_detect(REGNUM_BLOCK, "호평"))
full_data.general %>% filter(str_detect(REGNUM_BLOCK, "호평"))
nrow(full_data.general %>% filter(str_detect(REGNUM_BLOCK, "호평")))
gsub('호평', 'HO', full_data.general.REGNUM_BLOCK)
gsub('호평', 'HO', full_data.general$REGNUM_BLOCK)
full_data.general$REGNUM_BLOCK <- gsub('호평', 'HO', full_data.general$REGNUM_BLOCK)
summary(full_data.priorty)
full_data.priorty$REGNUM_BLOCK <- gsub('호평', 'HO', full_data.priorty$REGNUM_BLOCK)
summary(full_data.priorty)
full_data.general$BLOCK_NM <- gsub('호평', 'HO', full_data.general$BLOCK_NM)
full_data.priorty$BLOCK_NM <- gsub('호평', 'HO', full_data.priorty$BLOCK_NM)
summary(full_data.priorty)
summary(full_data.priorty)
summary(full_data.general)
unique(full_data.general$A_30)
str(unique(full_data.general$A_30))
unique(full_data.general$A_30)
factor( unique(full_data.general$A_30), levels = c(0, '3D', '3U', NA) )
str(full_data.general$A_30)
f <- unique(full_data.general$A_30)
f
factor(f, levels = c(NA, '3D', '3U', '0'))
factor(f, levels = c(NA, '3D', '3U', '0'))
factor(f, levels = c(NA, "3D", "3U", "0"))
factor(f, levels = rev(levels(c(NA, "3D", "3U", "0"))))
f
unique(full_data.general$A_30)
f <- levels(full_data.general$A_30)
f
levels(full_data.general$A_30)
factor(f, levels = c(NA, "0", "3D", "3U"))
factor(f, levels = factor(c(NA, "0", "3D", "3U")))
levels(c(NA, "0", "3D", "3U") )
gsub('', NA, full_data.general$A_30)
gsub('', 'N', full_data.general$A_30)
gsub(NA, 'N', full_data.general$A_30)
gsub('3년미만', '3D', full_data.general$A_30)
gsub('3년이상', '3U', full_data.general$A_30)
full_data.general$A_30 <- gsub('3년미만', '3D', full_data.general$A_30)
full_data.general$A_30 <- gsub('3년이상', '3U', full_data.general$A_30)
full_data.priorty$A_30 <- gsub('3년미만', '3D', full_data.priorty$A_30)
full_data.priorty$A_30 <- gsub('3년이상', '3U', full_data.priorty$A_30)
gsub('26형', '26F', full_data.general$A_30)
gsub('26형', '26F', full_data.general$W_3)
full_data.general$W_3 <- gsub('26형', '26F', full_data.general$W_3) full_data.general$W_3 <- gsub('36형', '36F', full_data.general$W_3) full_data.general$W_3 <- gsub('46형', '46F', full_data.general$W_3) full_data.priorty$W_3 <- gsub('26형', '26F', full_data.priorty$W_3) full_data.priorty$W_3 <- gsub('36형', '36F', full_data.priorty$W_3) full_data.priorty$W_3 <- gsub('46형', '46F', full_data.priorty$W_3)
gsub('낙첨', 'L', full_data.general$W_3)
gsub('당첨', 'W', full_data.general$W_4)
full_data.general$W_4 <- gsub('당첨', 'W', full_data.general$W_4) full_data.general$W_4 <- gsub('예비', 'R', full_data.general$W_4) full_data.general$W_4 <- gsub('낙첨', 'L', full_data.general$W_4) full_data.priorty$W_4 <- gsub('당첨', 'W', full_data.priorty$W_4) full_data.priorty$W_4 <- gsub('예비', 'R', full_data.priorty$W_4) full_data.priorty$W_4 <- gsub('낙첨', 'L', full_data.priorty$W_4)
unique(full_data.priorty$W_4)
gsub('1순위', '1st', full_data.general$W_13)
full_data.general$W_13 <- gsub('1순위', '1st', full_data.general$W_13) full_data.general$W_13 <- gsub('2순위', '2nd', full_data.general$W_13) full_data.general$W_13 <- gsub('3순위', '3rd', full_data.general$W_13) full_data.priorty$W_13 <- gsub('1순위', '1st', full_data.priorty$W_13) full_data.priorty$W_13 <- gsub('2순위', '2nd', full_data.priorty$W_13) full_data.priorty$W_13 <- gsub('3순위', '3rd', full_data.priorty$W_13)
unique(full_data.general$W_14)
unique(full_data.general$W_14)
summary(full_data.priorty$W_14)
unique(full_data.priorty$W_14)
full_data.general$W_14 <- gsub('N(장)', 'ND', full_data.general$W_14) full_data.general$W_14 <- gsub('일(장)', 'GD', full_data.general$W_14) full_data.general$W_14 <- gsub('일(일)', 'GG', full_data.general$W_14) full_data.general$W_14 <- gsub('일(고)', 'GH', full_data.general$W_14) full_data.general$W_14 <- gsub('N(일)', 'NG', full_data.general$W_14) full_data.general$W_14 <- gsub('N(고)', 'NH', full_data.general$W_14) full_data.general$W_14 <- gsub('일(중)', 'GC', full_data.general$W_14) full_data.general$W_14 <- gsub('일(노)', 'GN', full_data.general$W_14) full_data.general$W_14 <- gsub('N(한)', 'NHAN', full_data.general$W_14) full_data.general$W_14 <- gsub('일(한)', 'GHAN', full_data.general$W_14) full_data.general$W_14 <- gsub('N(노)', 'NN', full_data.general$W_14) full_data.general$W_14 <- gsub('N(신)', 'NM', full_data.general$W_14) full_data.general$W_14 <- gsub('N(북)', 'NBOOK', full_data.general$W_14) full_data.general$W_14 <- gsub('일(북)', 'GBOOK', full_data.general$W_14) full_data.general$W_14 <- gsub('N(근)', 'NGEUN', full_data.general$W_14) full_data.general$W_14 <- gsub('일(신)', 'GM', full_data.general$W_14) full_data.general$W_14 <- gsub('일(근)', 'GGEUN', full_data.general$W_14) full_data.general$W_14 <- gsub('N(중)', 'NC', full_data.general$W_14)
full_data.priorty$W_14 <- gsub('우(고)', 'PH', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('일(고)', 'GH', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('N(고)', 'NH', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('우(장)', 'PD', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('일(장)', 'GD', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('N(장)', 'ND', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('우(신)', 'PM', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('일(신)', 'GM', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('N(신)', 'NM', full_data.priorty$W_14)
summary(full_data.priorty)
unique(full_data.priorty$W_14)
unique(full_data.general$W_14)
 gsub('N(장)', 'ND', full_data.general$W_14)
gsub('N(장)', 'ND', full_data.general$W_14)
gsub('N\(장\)', 'ND', full_data.general$W_14)
gsub('N(\장\)', 'ND', full_data.general$W_14)
gsub('N(장\)', 'ND', full_data.general$W_14)
gsub('N\(\장\)\\', 'ND', full_data.general$W_14)
gsub('N(장)', 'ND', full_data.general$W_14)
full_data.priorty <- subset(full_data, W_14 %in% c('우(고)', '일(고)', 'N(고)', '우(장)', '일(장)', 'N(장)', '우(신)', '일(신)', 'N(신)') )
full_data.general <- full_data %>% filter(str_detect(W_14, "일") | str_detect(W_14, "N"))
full_data.general$REGNUM_BLOCK <- gsub('호평', 'HO', full_data.general$REGNUM_BLOCK)
full_data.priorty$REGNUM_BLOCK <- gsub('호평', 'HO', full_data.priorty$REGNUM_BLOCK)
full_data.general$BLOCK_NM <- gsub('호평', 'HO', full_data.general$BLOCK_NM)
full_data.priorty$BLOCK_NM <- gsub('호평', 'HO', full_data.priorty$BLOCK_NM)
full_data.general$A_30 <- gsub('3년미만', '3D', full_data.general$A_30) full_data.general$A_30 <- gsub('3년이상', '3U', full_data.general$A_30)
full_data.priorty$A_30 <- gsub('3년미만', '3D', full_data.priorty$A_30) full_data.priorty$A_30 <- gsub('3년이상', '3U', full_data.priorty$A_30)
full_data.general$W_3 <- gsub('26형', '26F', full_data.general$W_3) full_data.general$W_3 <- gsub('36형', '36F', full_data.general$W_3) full_data.general$W_3 <- gsub('46형', '46F', full_data.general$W_3) full_data.priorty$W_3 <- gsub('26형', '26F', full_data.priorty$W_3) full_data.priorty$W_3 <- gsub('36형', '36F', full_data.priorty$W_3) full_data.priorty$W_3 <- gsub('46형', '46F', full_data.priorty$W_3)
full_data.general$W_4 <- gsub('당첨', 'W', full_data.general$W_4) full_data.general$W_4 <- gsub('예비', 'R', full_data.general$W_4) full_data.general$W_4 <- gsub('낙첨', 'L', full_data.general$W_4) full_data.priorty$W_4 <- gsub('당첨', 'W', full_data.priorty$W_4) full_data.priorty$W_4 <- gsub('예비', 'R', full_data.priorty$W_4) full_data.priorty$W_4 <- gsub('낙첨', 'L', full_data.priorty$W_4)
full_data.general$W_13 <- gsub('1순위', '1st', full_data.general$W_13) full_data.general$W_13 <- gsub('2순위', '2nd', full_data.general$W_13) full_data.general$W_13 <- gsub('3순위', '3rd', full_data.general$W_13) full_data.priorty$W_13 <- gsub('1순위', '1st', full_data.priorty$W_13) full_data.priorty$W_13 <- gsub('2순위', '2nd', full_data.priorty$W_13) full_data.priorty$W_13 <- gsub('3순위', '3rd', full_data.priorty$W_13)
unique(full_data.general$W_14)
unique(full_data.priorty$W_14)
gsub('N(장)', 'ND', full_data.general$W_14)
full_data <- read.csv('full_data.csv', encoding = 'EUC-KR')
head(full_data)
full_data.priorty <- subset(full_data, W_14 %in% c('우고', '일고', 'N고', '우장', '일장', 'N장', '우신', '일신', 'N신') )
full_data.general <- full_data %>% filter(str_detect(W_14, "일") | str_detect(W_14, "N"))
full_data.general$REGNUM_BLOCK <- gsub('호평', 'HO', full_data.general$REGNUM_BLOCK)
full_data.priorty$REGNUM_BLOCK <- gsub('호평', 'HO', full_data.priorty$REGNUM_BLOCK)
full_data.general$BLOCK_NM <- gsub('호평', 'HO', full_data.general$BLOCK_NM)
full_data.priorty$BLOCK_NM <- gsub('호평', 'HO', full_data.priorty$BLOCK_NM)
full_data.general$A_30 <- gsub('3년미만', '3D', full_data.general$A_30) full_data.general$A_30 <- gsub('3년이상', '3U', full_data.general$A_30)
full_data.priorty$A_30 <- gsub('3년미만', '3D', full_data.priorty$A_30) full_data.priorty$A_30 <- gsub('3년이상', '3U', full_data.priorty$A_30)
full_data.general$W_3 <- gsub('26형', '26F', full_data.general$W_3) full_data.general$W_3 <- gsub('36형', '36F', full_data.general$W_3) full_data.general$W_3 <- gsub('46형', '46F', full_data.general$W_3) full_data.priorty$W_3 <- gsub('26형', '26F', full_data.priorty$W_3) full_data.priorty$W_3 <- gsub('36형', '36F', full_data.priorty$W_3) full_data.priorty$W_3 <- gsub('46형', '46F', full_data.priorty$W_3)
full_data.general$W_4 <- gsub('당첨', 'W', full_data.general$W_4) full_data.general$W_4 <- gsub('예비', 'R', full_data.general$W_4) full_data.general$W_4 <- gsub('낙첨', 'L', full_data.general$W_4) full_data.priorty$W_4 <- gsub('당첨', 'W', full_data.priorty$W_4) full_data.priorty$W_4 <- gsub('예비', 'R', full_data.priorty$W_4) full_data.priorty$W_4 <- gsub('낙첨', 'L', full_data.priorty$W_4)
full_data.general$W_13 <- gsub('1순위', '1st', full_data.general$W_13) full_data.general$W_13 <- gsub('2순위', '2nd', full_data.general$W_13) full_data.general$W_13 <- gsub('3순위', '3rd', full_data.general$W_13) full_data.priorty$W_13 <- gsub('1순위', '1st', full_data.priorty$W_13) full_data.priorty$W_13 <- gsub('2순위', '2nd', full_data.priorty$W_13) full_data.priorty$W_13 <- gsub('3순위', '3rd', full_data.priorty$W_13)
unique(full_data.general$W_14)
gsub('N장', 'ND', full_data.general$W_14)
full_data.general$W_14 <- gsub('N장', 'ND', full_data.general$W_14) full_data.general$W_14 <- gsub('일장', 'GD', full_data.general$W_14) full_data.general$W_14 <- gsub('일일', 'GG', full_data.general$W_14) full_data.general$W_14 <- gsub('일고', 'GH', full_data.general$W_14) full_data.general$W_14 <- gsub('N일', 'NG', full_data.general$W_14) full_data.general$W_14 <- gsub('N고', 'NH', full_data.general$W_14) full_data.general$W_14 <- gsub('일중', 'GC', full_data.general$W_14) full_data.general$W_14 <- gsub('일노', 'GN', full_data.general$W_14) full_data.general$W_14 <- gsub('N한', 'NHAN', full_data.general$W_14) full_data.general$W_14 <- gsub('일한', 'GHAN', full_data.general$W_14) full_data.general$W_14 <- gsub('N노', 'NN', full_data.general$W_14) full_data.general$W_14 <- gsub('N신', 'NM', full_data.general$W_14) full_data.general$W_14 <- gsub('N북', 'NBOOK', full_data.general$W_14) full_data.general$W_14 <- gsub('일북', 'GBOOK', full_data.general$W_14) full_data.general$W_14 <- gsub('N근', 'NGEUN', full_data.general$W_14) full_data.general$W_14 <- gsub('일신', 'GM', full_data.general$W_14) full_data.general$W_14 <- gsub('일근', 'GGEUN', full_data.general$W_14) full_data.general$W_14 <- gsub('N중', 'NC', full_data.general$W_14) full_data.priorty$W_14 <- gsub('우고', 'PH', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('일고', 'GH', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('N고', 'NH', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('우장', 'PD', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('일장', 'GD', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('N장', 'ND', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('우신', 'PM', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('일신', 'GM', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('N신', 'NM', full_data.priorty$W_14)
summary(full_data.priorty)
gsub('6급', '6R', full_data.general$W_15)
full_data.general$W_15 <- gsub('6급', '6R', full_data.general$W_15) full_data.general$W_15 <- gsub('5급', '5R', full_data.general$W_15) full_data.general$W_15 <- gsub('4급', '4R', full_data.general$W_15) full_data.general$W_15 <- gsub('3급', '3R', full_data.general$W_15) full_data.general$W_15 <- gsub('2급', '2R', full_data.general$W_15) full_data.general$W_15 <- gsub('1급', '1R', full_data.general$W_15) full_data.priorty$W_15 <- gsub('6급', '6R', full_data.priorty$W_15) full_data.priorty$W_15 <- gsub('5급', '5R', full_data.priorty$W_15) full_data.priorty$W_15 <- gsub('4급', '4R', full_data.priorty$W_15) full_data.priorty$W_15 <- gsub('3급', '3R', full_data.priorty$W_15) full_data.priorty$W_15 <- gsub('2급', '2R', full_data.priorty$W_15) full_data.priorty$W_15 <- gsub('1급', '1R', full_data.priorty$W_15)
gsub('', 'N', full_data.general$W_16)
gsub('당해', 'RESI', full_data.general$W_18)
full_data.general$W_18 <- gsub('당해', 'RESI', full_data.general$W_18) full_data.general$W_18 <- gsub('타', 'N_RESI', full_data.general$W_18) full_data.priorty$W_18 <- gsub('당해', 'RESI', full_data.priorty$W_18) full_data.priorty$W_18 <- gsub('타', 'N_RESI', full_data.priorty$W_18)
which(full_data.general$W_27 )
which(full_data.general$W_27)
full_data.general[which(full_data.general$W_27)]
full_data.general[which(full_data.general$W_27=="00년")]
full_data.general[which(full_data.general$W_27="00년")]
full_data.general[which(full_data.general.W_27=="00년")]
full_data.general[,which(full_data.general$W_27 =="00년")]
full_data.general[which(full_data.general$W_27 =="00년"),]
full_data.general[which(full_data.general$W_27 =="00년"),'W_27']
full_data.general[which(full_data.general$W_27 == "00년"), 'W_27'] = 0
full_data.general[which(full_data.general$W_27 == "00년"), 'W_27'] = 0 summary(full_data.priorty)
full_data.general[which(full_data.general$W_27 == "00년"), 'W_27'] = 0 summary(full_data.general)
full_data.general[which(full_data.general$W_27 == "63년"), 'W_27']
full_data.general[which(full_data.general$W_27 == "00년"), 'W_27'] = 0 full_data.general[which(full_data.general$W_27 == "01년"), 'W_27'] = 1 full_data.general[which(full_data.general$W_27 == "02년"), 'W_27'] = 2 full_data.general[which(full_data.general$W_27 == "03년"), 'W_27'] = 3 full_data.general[which(full_data.general$W_27 == "04년"), 'W_27'] = 4 full_data.general[which(full_data.general$W_27 == "05년"), 'W_27'] = 5 full_data.general[which(full_data.general$W_27 == "06년"), 'W_27'] = 6 full_data.general[which(full_data.general$W_27 == "07년"), 'W_27'] = 7 full_data.general[which(full_data.general$W_27 == "08년"), 'W_27'] = 8 full_data.general[which(full_data.general$W_27 == "09년"), 'W_27'] = 9 full_data.general[which(full_data.general$W_27 == "10년"), 'W_27'] = 10 full_data.general[which(full_data.general$W_27 == "11년"), 'W_27'] = 11 full_data.general[which(full_data.general$W_27 == "12년"), 'W_27'] = 12 full_data.general[which(full_data.general$W_27 == "13년"), 'W_27'] = 13 full_data.general[which(full_data.general$W_27 == "14년"), 'W_27'] = 14 full_data.general[which(full_data.general$W_27 == "15년"), 'W_27'] = 15 full_data.general[which(full_data.general$W_27 == "16년"), 'W_27'] = 16 full_data.general[which(full_data.general$W_27 == "17년"), 'W_27'] = 17 full_data.general[which(full_data.general$W_27 == "18년"), 'W_27'] = 18 full_data.general[which(full_data.general$W_27 == "19년"), 'W_27'] = 19 full_data.general[which(full_data.general$W_27 == "20년"), 'W_27'] = 20 full_data.general[which(full_data.general$W_27 == "21년"), 'W_27'] = 21 full_data.general[which(full_data.general$W_27 == "22년"), 'W_27'] = 22 full_data.general[which(full_data.general$W_27 == "23년"), 'W_27'] = 23 full_data.general[which(full_data.general$W_27 == "24년"), 'W_27'] = 24 full_data.general[which(full_data.general$W_27 == "25년"), 'W_27'] = 25 full_data.general[which(full_data.general$W_27 == "26년"), 'W_27'] = 26 full_data.general[which(full_data.general$W_27 == "27년"), 'W_27'] = 27 full_data.general[which(full_data.general$W_27 == "28년"), 'W_27'] = 28 full_data.general[which(full_data.general$W_27 == "29년"), 'W_27'] = 29 full_data.general[which(full_data.general$W_27 == "30년"), 'W_27'] = 30 full_data.general[which(full_data.general$W_27 == "31년"), 'W_27'] = 31 full_data.general[which(full_data.general$W_27 == "32년"), 'W_27'] = 32 full_data.general[which(full_data.general$W_27 == "33년"), 'W_27'] = 33 full_data.general[which(full_data.general$W_27 == "34년"), 'W_27'] = 34 full_data.general[which(full_data.general$W_27 == "35년"), 'W_27'] = 35 full_data.general[which(full_data.general$W_27 == "36년"), 'W_27'] = 36 full_data.general[which(full_data.general$W_27 == "37년"), 'W_27'] = 37 full_data.general[which(full_data.general$W_27 == "38년"), 'W_27'] = 38 full_data.general[which(full_data.general$W_27 == "39년"), 'W_27'] = 39 full_data.general[which(full_data.general$W_27 == "40년"), 'W_27'] = 40 full_data.general[which(full_data.general$W_27 == "41년"), 'W_27'] = 41 full_data.general[which(full_data.general$W_27 == "48년"), 'W_27'] = 48 full_data.general[which(full_data.general$W_27 == "63년"), 'W_27'] = 63 full_data.priorty[which(full_data.priorty$W_27 == "00년"), 'W_27'] = 0 full_data.priorty[which(full_data.priorty$W_27 == "01년"), 'W_27'] = 1 full_data.priorty[which(full_data.priorty$W_27 == "02년"), 'W_27'] = 2 full_data.priorty[which(full_data.priorty$W_27 == "03년"), 'W_27'] = 3 full_data.priorty[which(full_data.priorty$W_27 == "04년"), 'W_27'] = 4 full_data.priorty[which(full_data.priorty$W_27 == "05년"), 'W_27'] = 5 full_data.priorty[which(full_data.priorty$W_27 == "06년"), 'W_27'] = 6 full_data.priorty[which(full_data.priorty$W_27 == "07년"), 'W_27'] = 7 full_data.priorty[which(full_data.priorty$W_27 == "08년"), 'W_27'] = 8 full_data.priorty[which(full_data.priorty$W_27 == "09년"), 'W_27'] = 9 full_data.priorty[which(full_data.priorty$W_27 == "10년"), 'W_27'] = 10 full_data.priorty[which(full_data.priorty$W_27 == "11년"), 'W_27'] = 11 full_data.priorty[which(full_data.priorty$W_27 == "12년"), 'W_27'] = 12 full_data.priorty[which(full_data.priorty$W_27 == "13년"), 'W_27'] = 13 full_data.priorty[which(full_data.priorty$W_27 == "14년"), 'W_27'] = 14 full_data.priorty[which(full_data.priorty$W_27 == "15년"), 'W_27'] = 15 full_data.priorty[which(full_data.priorty$W_27 == "16년"), 'W_27'] = 16 full_data.priorty[which(full_data.priorty$W_27 == "17년"), 'W_27'] = 17 full_data.priorty[which(full_data.priorty$W_27 == "18년"), 'W_27'] = 18 full_data.priorty[which(full_data.priorty$W_27 == "19년"), 'W_27'] = 19 full_data.priorty[which(full_data.priorty$W_27 == "20년"), 'W_27'] = 20 full_data.priorty[which(full_data.priorty$W_27 == "21년"), 'W_27'] = 21 full_data.priorty[which(full_data.priorty$W_27 == "22년"), 'W_27'] = 22 full_data.priorty[which(full_data.priorty$W_27 == "23년"), 'W_27'] = 23 full_data.priorty[which(full_data.priorty$W_27 == "24년"), 'W_27'] = 24 full_data.priorty[which(full_data.priorty$W_27 == "25년"), 'W_27'] = 25 full_data.priorty[which(full_data.priorty$W_27 == "26년"), 'W_27'] = 26 full_data.priorty[which(full_data.priorty$W_27 == "27년"), 'W_27'] = 27 full_data.priorty[which(full_data.priorty$W_27 == "28년"), 'W_27'] = 28 full_data.priorty[which(full_data.priorty$W_27 == "29년"), 'W_27'] = 29 full_data.priorty[which(full_data.priorty$W_27 == "30년"), 'W_27'] = 30 full_data.priorty[which(full_data.priorty$W_27 == "31년"), 'W_27'] = 31 full_data.priorty[which(full_data.priorty$W_27 == "32년"), 'W_27'] = 32 full_data.priorty[which(full_data.priorty$W_27 == "33년"), 'W_27'] = 33 full_data.priorty[which(full_data.priorty$W_27 == "34년"), 'W_27'] = 34 full_data.priorty[which(full_data.priorty$W_27 == "35년"), 'W_27'] = 35 full_data.priorty[which(full_data.priorty$W_27 == "36년"), 'W_27'] = 36 full_data.priorty[which(full_data.priorty$W_27 == "37년"), 'W_27'] = 37 full_data.priorty[which(full_data.priorty$W_27 == "38년"), 'W_27'] = 38 full_data.priorty[which(full_data.priorty$W_27 == "39년"), 'W_27'] = 39 full_data.priorty[which(full_data.priorty$W_27 == "40년"), 'W_27'] = 40 full_data.priorty[which(full_data.priorty$W_27 == "41년"), 'W_27'] = 41 full_data.priorty[which(full_data.priorty$W_27 == "48년"), 'W_27'] = 48 full_data.priorty[which(full_data.priorty$W_27 == "63년"), 'W_27'] = 63
summary(full_data.priorty)
unique(full_data.priorty$W_27)
full_data.general <- full_data %>% filter(str_detect(W_14, "일") | str_detect(W_14, "N"))
full_data <- read.csv('full_data.csv', encoding = 'EUC-KR')
head(full_data)
full_data.priorty <- subset(full_data, W_14 %in% c('우고', '일고', 'N고', '우장', '일장', 'N장', '우신', '일신', 'N신') )
full_data.general <- full_data %>% filter(str_detect(W_14, "일") | str_detect(W_14, "N"))
full_data.general$REGNUM_BLOCK <- gsub('호평', 'HO', full_data.general$REGNUM_BLOCK) full_data.priorty$REGNUM_BLOCK <- gsub('호평', 'HO', full_data.priorty$REGNUM_BLOCK) ## BLOCK_NM 필드 full_data.general$BLOCK_NM <- gsub('호평', 'HO', full_data.general$BLOCK_NM) full_data.priorty$BLOCK_NM <- gsub('호평', 'HO', full_data.priorty$BLOCK_NM) ## A_30 필드 full_data.general$A_30 <- gsub('', 'N', full_data.general$A_30) full_data.general$A_30 <- gsub('3년미만', '3D', full_data.general$A_30) full_data.general$A_30 <- gsub('3년이상', '3U', full_data.general$A_30) full_data.priorty$A_30 <- gsub('', NA, full_data.priorty$A_30) full_data.priorty$A_30 <- gsub('3년미만', '3D', full_data.priorty$A_30) full_data.priorty$A_30 <- gsub('3년이상', '3U', full_data.priorty$A_30) ## W_3 필드 full_data.general$W_3 <- gsub('26형', '26F', full_data.general$W_3) full_data.general$W_3 <- gsub('36형', '36F', full_data.general$W_3) full_data.general$W_3 <- gsub('46형', '46F', full_data.general$W_3) full_data.priorty$W_3 <- gsub('26형', '26F', full_data.priorty$W_3) full_data.priorty$W_3 <- gsub('36형', '36F', full_data.priorty$W_3) full_data.priorty$W_3 <- gsub('46형', '46F', full_data.priorty$W_3) ## W_4 필드 full_data.general$W_4 <- gsub('당첨', 'W', full_data.general$W_4) full_data.general$W_4 <- gsub('예비', 'R', full_data.general$W_4) full_data.general$W_4 <- gsub('낙첨', 'L', full_data.general$W_4) full_data.priorty$W_4 <- gsub('당첨', 'W', full_data.priorty$W_4) full_data.priorty$W_4 <- gsub('예비', 'R', full_data.priorty$W_4) full_data.priorty$W_4 <- gsub('낙첨', 'L', full_data.priorty$W_4) ## W_13 필드 full_data.general$W_13 <- gsub('1순위', '1st', full_data.general$W_13) full_data.general$W_13 <- gsub('2순위', '2nd', full_data.general$W_13) full_data.general$W_13 <- gsub('3순위', '3rd', full_data.general$W_13) full_data.priorty$W_13 <- gsub('1순위', '1st', full_data.priorty$W_13) full_data.priorty$W_13 <- gsub('2순위', '2nd', full_data.priorty$W_13) full_data.priorty$W_13 <- gsub('3순위', '3rd', full_data.priorty$W_13) ## W_14 필드 unique(full_data.general$W_14) unique(full_data.priorty$W_14) full_data.general$W_14 <- gsub('N장', 'ND', full_data.general$W_14) full_data.general$W_14 <- gsub('일장', 'GD', full_data.general$W_14) full_data.general$W_14 <- gsub('일일', 'GG', full_data.general$W_14) full_data.general$W_14 <- gsub('일고', 'GH', full_data.general$W_14) full_data.general$W_14 <- gsub('N일', 'NG', full_data.general$W_14) full_data.general$W_14 <- gsub('N고', 'NH', full_data.general$W_14) full_data.general$W_14 <- gsub('일중', 'GC', full_data.general$W_14) full_data.general$W_14 <- gsub('일노', 'GN', full_data.general$W_14) full_data.general$W_14 <- gsub('N한', 'NHAN', full_data.general$W_14) full_data.general$W_14 <- gsub('일한', 'GHAN', full_data.general$W_14) full_data.general$W_14 <- gsub('N노', 'NN', full_data.general$W_14) full_data.general$W_14 <- gsub('N신', 'NM', full_data.general$W_14) full_data.general$W_14 <- gsub('N북', 'NBOOK', full_data.general$W_14) full_data.general$W_14 <- gsub('일북', 'GBOOK', full_data.general$W_14) full_data.general$W_14 <- gsub('N근', 'NGEUN', full_data.general$W_14) full_data.general$W_14 <- gsub('일신', 'GM', full_data.general$W_14) full_data.general$W_14 <- gsub('일근', 'GGEUN', full_data.general$W_14) full_data.general$W_14 <- gsub('N중', 'NC', full_data.general$W_14) full_data.priorty$W_14 <- gsub('우고', 'PH', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('일고', 'GH', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('N고', 'NH', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('우장', 'PD', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('일장', 'GD', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('N장', 'ND', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('우신', 'PM', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('일신', 'GM', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('N신', 'NM', full_data.priorty$W_14) ## W_15 full_data.general$W_15 <- gsub('6급', '6R', full_data.general$W_15) full_data.general$W_15 <- gsub('5급', '5R', full_data.general$W_15) full_data.general$W_15 <- gsub('4급', '4R', full_data.general$W_15) full_data.general$W_15 <- gsub('3급', '3R', full_data.general$W_15) full_data.general$W_15 <- gsub('2급', '2R', full_data.general$W_15) full_data.general$W_15 <- gsub('1급', '1R', full_data.general$W_15) full_data.priorty$W_15 <- gsub('6급', '6R', full_data.priorty$W_15) full_data.priorty$W_15 <- gsub('5급', '5R', full_data.priorty$W_15) full_data.priorty$W_15 <- gsub('4급', '4R', full_data.priorty$W_15) full_data.priorty$W_15 <- gsub('3급', '3R', full_data.priorty$W_15) full_data.priorty$W_15 <- gsub('2급', '2R', full_data.priorty$W_15) full_data.priorty$W_15 <- gsub('1급', '1R', full_data.priorty$W_15) ## W_16 ## W_18 full_data.general$W_18 <- gsub('당해', 'RESI', full_data.general$W_18) full_data.general$W_18 <- gsub('타', 'N_RESI', full_data.general$W_18) full_data.priorty$W_18 <- gsub('당해', 'RESI', full_data.priorty$W_18) full_data.priorty$W_18 <- gsub('타', 'N_RESI', full_data.priorty$W_18)
full_data.general[which(full_data.general$W_27 == "00년"), 'W_27']
gsub("00년" "0", full_data.general$W_27)
gsub("00년", "0", full_data.general$W_27)
full_data.general$W_27 <- gsub("00년", "0", full_data.general$W_27) full_data.general$W_27 <- gsub("01년", "1", full_data.general$W_27) full_data.general$W_27 <- gsub("02년", "2", full_data.general$W_27) full_data.general$W_27 <- gsub("03년", "3", full_data.general$W_27) full_data.general$W_27 <- gsub("04년", "4", full_data.general$W_27) full_data.general$W_27 <- gsub("05년", "5", full_data.general$W_27) full_data.general$W_27 <- gsub("06년", "6", full_data.general$W_27) full_data.general$W_27 <- gsub("07년", "7", full_data.general$W_27) full_data.general$W_27 <- gsub("08년", "8", full_data.general$W_27) full_data.general$W_27 <- gsub("09년", "9", full_data.general$W_27) full_data.general$W_27 <- gsub("10년", "10", full_data.general$W_27) full_data.general$W_27 <- gsub("11년", "11", full_data.general$W_27) full_data.general$W_27 <- gsub("12년", "12", full_data.general$W_27) full_data.general$W_27 <- gsub("13년", "13", full_data.general$W_27) full_data.general$W_27 <- gsub("14년", "14", full_data.general$W_27) full_data.general$W_27 <- gsub("15년", "15", full_data.general$W_27) full_data.general$W_27 <- gsub("16년", "16", full_data.general$W_27) full_data.general$W_27 <- gsub("17년", "17", full_data.general$W_27) full_data.general$W_27 <- gsub("18년", "18", full_data.general$W_27) full_data.general$W_27 <- gsub("19년", "19", full_data.general$W_27) full_data.general$W_27 <- gsub("20년", "20", full_data.general$W_27) full_data.general$W_27 <- gsub("21년", "21", full_data.general$W_27) full_data.general$W_27 <- gsub("22년", "22", full_data.general$W_27) full_data.general$W_27 <- gsub("23년", "23", full_data.general$W_27) full_data.general$W_27 <- gsub("24년", "24", full_data.general$W_27) full_data.general$W_27 <- gsub("25년", "25", full_data.general$W_27) full_data.general$W_27 <- gsub("26년", "26", full_data.general$W_27) full_data.general$W_27 <- gsub("27년", "27", full_data.general$W_27) full_data.general$W_27 <- gsub("28년", "28", full_data.general$W_27) full_data.general$W_27 <- gsub("29년", "29", full_data.general$W_27) full_data.general$W_27 <- gsub("30년", "30", full_data.general$W_27) full_data.general$W_27 <- gsub("31년", "31", full_data.general$W_27) full_data.general$W_27 <- gsub("32년", "32", full_data.general$W_27) full_data.general$W_27 <- gsub("33년", "33", full_data.general$W_27) full_data.general$W_27 <- gsub("34년", "34", full_data.general$W_27) full_data.general$W_27 <- gsub("35년", "35", full_data.general$W_27) full_data.general$W_27 <- gsub("36년", "36", full_data.general$W_27) full_data.general$W_27 <- gsub("37년", "37", full_data.general$W_27) full_data.general$W_27 <- gsub("38년", "38", full_data.general$W_27) full_data.general$W_27 <- gsub("39년", "39", full_data.general$W_27) full_data.general$W_27 <- gsub("40년", "40", full_data.general$W_27) full_data.general$W_27 <- gsub("41년", "41", full_data.general$W_27) full_data.general$W_27 <- gsub("48년", "48", full_data.general$W_27) full_data.general$W_27 <- gsub("63년", "63", full_data.general$W_27)
full_data.priorty$W_27 <- gsub("00년", "0", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("01년", "1", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("02년", "2", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("03년", "3", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("04년", "4", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("05년", "5", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("06년", "6", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("07년", "7", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("08년", "8", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("09년", "9", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("10년", "10", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("11년", "11", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("12년", "12", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("13년", "13", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("14년", "14", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("15년", "15", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("16년", "16", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("17년", "17", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("18년", "18", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("19년", "19", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("20년", "20", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("21년", "21", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("22년", "22", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("23년", "23", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("24년", "24", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("25년", "25", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("26년", "26", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("27년", "27", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("28년", "28", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("29년", "29", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("30년", "30", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("31년", "31", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("32년", "32", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("33년", "33", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("34년", "34", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("35년", "35", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("36년", "36", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("37년", "37", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("38년", "38", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("39년", "39", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("40년", "40", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("41년", "41", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("48년", "48", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("63년", "63", full_data.priorty$W_27)
full_data.general$W_38 <- gsub("0년", "0", full_data.general$W_38) full_data.general$W_38 <- gsub("1년", "1", full_data.general$W_38) full_data.general$W_38 <- gsub("2년", "2", full_data.general$W_38) full_data.general$W_38 <- gsub("3년", "3", full_data.general$W_38) full_data.general$W_38 <- gsub("4년", "4", full_data.general$W_38) full_data.general$W_38 <- gsub("5년", "5", full_data.general$W_38) full_data.priorty$W_38 <- gsub("0년", "0", full_data.priorty$W_38) full_data.priorty$W_38 <- gsub("1년", "1", full_data.priorty$W_38) full_data.priorty$W_38 <- gsub("2년", "2", full_data.priorty$W_38) full_data.priorty$W_38 <- gsub("3년", "3", full_data.priorty$W_38) full_data.priorty$W_38 <- gsub("4년", "4", full_data.priorty$W_38) full_data.priorty$W_38 <- gsub("5년", "5", full_data.priorty$W_38)
full_data.general$W_40 <- gsub('당해', 'RESI', full_data.general$W_40) full_data.general$W_40 <- gsub('타', 'N_RESI', full_data.general$W_40) full_data.priorty$W_40 <- gsub('당해', 'RESI', full_data.priorty$W_40) full_data.priorty$W_40 <- gsub('타', 'N_RESI', full_data.priorty$W_40)
summary(full_data.priorty)
full_data.general$W_39 <- gsub('1순위', '1st', full_data.general$W_39) full_data.general$W_39 <- gsub('2순위', '2nd', full_data.general$W_39) full_data.priorty$W_39 <- gsub('1순위', '1st', full_data.priorty$W_39) full_data.priorty$W_39 <- gsub('2순위', '2nd', full_data.priorty$W_39)
summary(full_data.priorty)
highage_26 <- subset(full_data, W_3 == '26F' & (W_14 == 'PH' | W_14 == 'GH' | W_14 == 'NH'))
highage_36 <- subset(full_data, W_3 == '36F' & (W_14 == 'PH' | W_14 == 'GH' | W_14 == 'NH'))
highage_46 <- subset(full_data, W_3 == '46F' & (W_14 == 'PH' | W_14 == 'GH' | W_14 == 'NH'))
nrow(highage_26)
highage_26 <- subset(full_data.priorty, W_3 == '26F' & (W_14 == 'PH' | W_14 == 'GH' | W_14 == 'NH'))
highage_36 <- subset(full_data.priorty, W_3 == '36F' & (W_14 == 'PH' | W_14 == 'GH' | W_14 == 'NH'))
highage_46 <- subset(full_data.priorty, W_3 == '46F' & (W_14 == 'PH' | W_14 == 'GH' | W_14 == 'NH'))
nrow(highage_26)
summary(highage_26)
write.table(highage_26, 'highage_26.csv')
write.table(highage_36, 'highage_36.csv')
write.table(highage_46, 'highage_46.csv')
disabled_26 <- subset(full_data.priorty, W_3 == '26F' & (W_14 == 'PD' | W_14 == 'GD' | W_14 == 'ND'))
disabled_36 <- subset(full_data.priorty, W_3 == '36F' & (W_14 == 'PD' | W_14 == 'GD' | W_14 == 'ND'))
disabled_46 <- subset(full_data.priorty, W_3 == '46F' & (W_14 == 'PD' | W_14 == 'GD' | W_14 == 'ND'))
summary(disabled_26)
write.table(disabled_26, 'disabled_26.csv')
write.table(disabled_36, 'disabled_36.csv')
write.table(disabled_46, 'disabled_46.csv')
married_46 <- subset(full_data.priorty, W_3 == '46F' & (W_14 == 'PM' | W_14 == 'GM' | W_14 == 'NM'))
write.table(married_46, 'married_46.csv')
full_data.general %>% filter(W_3 == "26F" & (str_detect(W_14, "일") | str_detect(W_14, "N")))
full_data.general %>% filter(W_3 == "26F" & W_14 %in% c('ND', 'GD', 'GG', 'GH', 'NG', 'NH', 'GC', 'GN', 'NHAN', 'GHAN', 'NN', 'NM', 'NBOOK', 'GBOOK', 'NGEUN', 'GM', 'GGEUN', 'NC') )
full_data.general %>% filter(W_3 == "26F" & W_14 %in% c('ND', 'GD', 'GG', 'GH', 'NG', 'NH', 'GC', 'GN', 'NHAN', 'GHAN', 'NN', 'NM', 'NBOOK', 'GBOOK', 'NGEUN', 'GM', 'GGEUN', 'NC') )
general_26 <- full_data.general %>% filter(W_3 == "26F" & W_14 %in% c('ND', 'GD', 'GG', 'GH', 'NG', 'NH', 'GC', 'GN', 'NHAN', 'GHAN', 'NN', 'NM', 'NBOOK', 'GBOOK', 'NGEUN', 'GM', 'GGEUN', 'NC'))
general_36 <- full_data.general %>% filter(W_3 == "36F" & W_14 %in% c('ND', 'GD', 'GG', 'GH', 'NG', 'NH', 'GC', 'GN', 'NHAN', 'GHAN', 'NN', 'NM', 'NBOOK', 'GBOOK', 'NGEUN', 'GM', 'GGEUN', 'NC'))
general_46 <- full_data.general %>% filter(W_3 == "46F" & W_14 %in% c('ND', 'GD', 'GG', 'GH', 'NG', 'NH', 'GC', 'GN', 'NHAN', 'GHAN', 'NN', 'NM', 'NBOOK', 'GBOOK', 'NGEUN', 'GM', 'GGEUN', 'NC'))
write.table(general_26, 'general_26.csv')
write.table(general_26, 'general_36.csv')
write.table(general_26, 'general_46.csv')
full_data <- read.csv('full_data.csv', encoding = 'EUC-KR')
head(full_data)
full_data.priorty <- subset(full_data, W_14 %in% c('우고', '일고', 'N고', '우장', '일장', 'N장', '우신', '일신', 'N신') )
full_data.general <- full_data %>% filter(str_detect(W_14, "일") | str_detect(W_14, "N"))
full_data.priorty <- subset(full_data, W_14 %in% c('우고', '일고', 'N고', '우장', '일장', 'N장', '우신', '일신', 'N신') )
subset(full_data, W_14 !%in% c('우고', '일고', 'N고', '우장', '일장', 'N장', '우신', '일신', 'N신')) ) }
subset(full_data, !(W_14 %in% c('우고', '일고', 'N고', '우장', '일장', 'N장', '우신', '일신', 'N신')))
full_data.priorty <- subset(full_data, W_14 %in% c('우고', '일고', 'N고', '우장', '일장', 'N장', '우신', '일신', 'N신') )
full_data.general <- subset(full_data, !(W_14 %in% c('우고', '일고', 'N고', '우장', '일장', 'N장', '우신', '일신', 'N신')))
unique(full_data.general$W_14)
full_data.general$REGNUM_BLOCK <- gsub('호평', 'HO', full_data.general$REGNUM_BLOCK) full_data.priorty$REGNUM_BLOCK <- gsub('호평', 'HO', full_data.priorty$REGNUM_BLOCK)
full_data.general$BLOCK_NM <- gsub('호평', 'HO', full_data.general$BLOCK_NM) full_data.priorty$BLOCK_NM <- gsub('호평', 'HO', full_data.priorty$BLOCK_NM)
full_data.general$A_30 <- gsub('3년미만', '3D', full_data.general$A_30) full_data.general$A_30 <- gsub('3년이상', '3U', full_data.general$A_30)
full_data.priorty$A_30 <- gsub('3년미만', '3D', full_data.priorty$A_30) full_data.priorty$A_30 <- gsub('3년이상', '3U', full_data.priorty$A_30)
full_data.general$W_3 <- gsub('26형', '26F', full_data.general$W_3) full_data.general$W_3 <- gsub('36형', '36F', full_data.general$W_3) full_data.general$W_3 <- gsub('46형', '46F', full_data.general$W_3) full_data.priorty$W_3 <- gsub('26형', '26F', full_data.priorty$W_3) full_data.priorty$W_3 <- gsub('36형', '36F', full_data.priorty$W_3) full_data.priorty$W_3 <- gsub('46형', '46F', full_data.priorty$W_3)
full_data.general$W_4 <- gsub('당첨', 'W', full_data.general$W_4) full_data.general$W_4 <- gsub('예비', 'R', full_data.general$W_4) full_data.general$W_4 <- gsub('낙첨', 'L', full_data.general$W_4) full_data.priorty$W_4 <- gsub('당첨', 'W', full_data.priorty$W_4) full_data.priorty$W_4 <- gsub('예비', 'R', full_data.priorty$W_4) full_data.priorty$W_4 <- gsub('낙첨', 'L', full_data.priorty$W_4)
full_data.general$W_13 <- gsub('1순위', '1st', full_data.general$W_13) full_data.general$W_13 <- gsub('2순위', '2nd', full_data.general$W_13) full_data.general$W_13 <- gsub('3순위', '3rd', full_data.general$W_13) full_data.priorty$W_13 <- gsub('1순위', '1st', full_data.priorty$W_13) full_data.priorty$W_13 <- gsub('2순위', '2nd', full_data.priorty$W_13) full_data.priorty$W_13 <- gsub('3순위', '3rd', full_data.priorty$W_13)
unique(full_data.general$W_14)
full_data %>% !filter(str_detect(W_14, "우"))
full_data %>% filter(!str_detect(W_14, "우"))
full_data.priorty <- subset(full_data, W_14 %in% c('우고', '일고', 'N고', '우장', '일장', 'N장', '우신', '일신', 'N신') )
full_data.general <- full_data %>% filter(!str_detect(W_14, "우"))
full_data <- read.csv('full_data.csv', encoding = 'EUC-KR')
head(full_data)
full_data.priorty <- subset(full_data, W_14 %in% c('우고', '일고', 'N고', '우장', '일장', 'N장', '우신', '일신', 'N신') )
full_data.general <- full_data %>% filter(!str_detect(W_14, "우"))
unique(full_data.general$W_14)
full_data.general$REGNUM_BLOCK <- gsub('호평', 'HO', full_data.general$REGNUM_BLOCK)
full_data.priorty$REGNUM_BLOCK <- gsub('호평', 'HO', full_data.priorty$REGNUM_BLOCK)
full_data.general$BLOCK_NM <- gsub('호평', 'HO', full_data.general$BLOCK_NM)
full_data.priorty$BLOCK_NM <- gsub('호평', 'HO', full_data.priorty$BLOCK_NM)
full_data.general$A_30 <- gsub('3년미만', '3D', full_data.general$A_30)
full_data.general$A_30 <- gsub('3년이상', '3U', full_data.general$A_30)
full_data.priorty$A_30 <- gsub('3년미만', '3D', full_data.priorty$A_30)
full_data.priorty$A_30 <- gsub('3년이상', '3U', full_data.priorty$A_30)
full_data.general$W_3 <- gsub('26형', '26F', full_data.general$W_3) full_data.general$W_3 <- gsub('36형', '36F', full_data.general$W_3) full_data.general$W_3 <- gsub('46형', '46F', full_data.general$W_3) full_data.priorty$W_3 <- gsub('26형', '26F', full_data.priorty$W_3) full_data.priorty$W_3 <- gsub('36형', '36F', full_data.priorty$W_3) full_data.priorty$W_3 <- gsub('46형', '46F', full_data.priorty$W_3)
full_data.general$W_4 <- gsub('당첨', 'W', full_data.general$W_4) full_data.general$W_4 <- gsub('예비', 'R', full_data.general$W_4) full_data.general$W_4 <- gsub('낙첨', 'L', full_data.general$W_4) full_data.priorty$W_4 <- gsub('당첨', 'W', full_data.priorty$W_4) full_data.priorty$W_4 <- gsub('예비', 'R', full_data.priorty$W_4) full_data.priorty$W_4 <- gsub('낙첨', 'L', full_data.priorty$W_4)
full_data.general$W_13 <- gsub('1순위', '1st', full_data.general$W_13) full_data.general$W_13 <- gsub('2순위', '2nd', full_data.general$W_13) full_data.general$W_13 <- gsub('3순위', '3rd', full_data.general$W_13) full_data.priorty$W_13 <- gsub('1순위', '1st', full_data.priorty$W_13) full_data.priorty$W_13 <- gsub('2순위', '2nd', full_data.priorty$W_13) full_data.priorty$W_13 <- gsub('3순위', '3rd', full_data.priorty$W_13)
full_data.general$W_14 <- gsub('N장', 'ND', full_data.general$W_14) full_data.general$W_14 <- gsub('일장', 'GD', full_data.general$W_14) full_data.general$W_14 <- gsub('일일', 'GG', full_data.general$W_14) full_data.general$W_14 <- gsub('일고', 'GH', full_data.general$W_14) full_data.general$W_14 <- gsub('N일', 'NG', full_data.general$W_14) full_data.general$W_14 <- gsub('N고', 'NH', full_data.general$W_14) full_data.general$W_14 <- gsub('일중', 'GC', full_data.general$W_14) full_data.general$W_14 <- gsub('일노', 'GN', full_data.general$W_14) full_data.general$W_14 <- gsub('N한', 'NHAN', full_data.general$W_14) full_data.general$W_14 <- gsub('일한', 'GHAN', full_data.general$W_14) full_data.general$W_14 <- gsub('N노', 'NN', full_data.general$W_14) full_data.general$W_14 <- gsub('N신', 'NM', full_data.general$W_14) full_data.general$W_14 <- gsub('N북', 'NBOOK', full_data.general$W_14) full_data.general$W_14 <- gsub('일북', 'GBOOK', full_data.general$W_14) full_data.general$W_14 <- gsub('N근', 'NGEUN', full_data.general$W_14) full_data.general$W_14 <- gsub('일신', 'GM', full_data.general$W_14) full_data.general$W_14 <- gsub('일근', 'GGEUN', full_data.general$W_14) full_data.general$W_14 <- gsub('N중', 'NC', full_data.general$W_14) full_data.priorty$W_14 <- gsub('우고', 'PH', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('일고', 'GH', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('N고', 'NH', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('우장', 'PD', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('일장', 'GD', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('N장', 'ND', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('우신', 'PM', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('일신', 'GM', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('N신', 'NM', full_data.priorty$W_14)
full_data.general$W_15 <- gsub('6급', '6R', full_data.general$W_15) full_data.general$W_15 <- gsub('5급', '5R', full_data.general$W_15) full_data.general$W_15 <- gsub('4급', '4R', full_data.general$W_15) full_data.general$W_15 <- gsub('3급', '3R', full_data.general$W_15) full_data.general$W_15 <- gsub('2급', '2R', full_data.general$W_15) full_data.general$W_15 <- gsub('1급', '1R', full_data.general$W_15) full_data.priorty$W_15 <- gsub('6급', '6R', full_data.priorty$W_15) full_data.priorty$W_15 <- gsub('5급', '5R', full_data.priorty$W_15) full_data.priorty$W_15 <- gsub('4급', '4R', full_data.priorty$W_15) full_data.priorty$W_15 <- gsub('3급', '3R', full_data.priorty$W_15) full_data.priorty$W_15 <- gsub('2급', '2R', full_data.priorty$W_15) full_data.priorty$W_15 <- gsub('1급', '1R', full_data.priorty$W_15)
full_data.general$W_18 <- gsub('당해', 'RESI', full_data.general$W_18) full_data.general$W_18 <- gsub('타', 'N_RESI', full_data.general$W_18) full_data.priorty$W_18 <- gsub('당해', 'RESI', full_data.priorty$W_18) full_data.priorty$W_18 <- gsub('타', 'N_RESI', full_data.priorty$W_18)
full_data.general$W_27 <- gsub("00년", "0", full_data.general$W_27) full_data.general$W_27 <- gsub("01년", "1", full_data.general$W_27) full_data.general$W_27 <- gsub("02년", "2", full_data.general$W_27) full_data.general$W_27 <- gsub("03년", "3", full_data.general$W_27) full_data.general$W_27 <- gsub("04년", "4", full_data.general$W_27) full_data.general$W_27 <- gsub("05년", "5", full_data.general$W_27) full_data.general$W_27 <- gsub("06년", "6", full_data.general$W_27) full_data.general$W_27 <- gsub("07년", "7", full_data.general$W_27) full_data.general$W_27 <- gsub("08년", "8", full_data.general$W_27) full_data.general$W_27 <- gsub("09년", "9", full_data.general$W_27) full_data.general$W_27 <- gsub("10년", "10", full_data.general$W_27) full_data.general$W_27 <- gsub("11년", "11", full_data.general$W_27) full_data.general$W_27 <- gsub("12년", "12", full_data.general$W_27) full_data.general$W_27 <- gsub("13년", "13", full_data.general$W_27) full_data.general$W_27 <- gsub("14년", "14", full_data.general$W_27) full_data.general$W_27 <- gsub("15년", "15", full_data.general$W_27) full_data.general$W_27 <- gsub("16년", "16", full_data.general$W_27) full_data.general$W_27 <- gsub("17년", "17", full_data.general$W_27) full_data.general$W_27 <- gsub("18년", "18", full_data.general$W_27) full_data.general$W_27 <- gsub("19년", "19", full_data.general$W_27) full_data.general$W_27 <- gsub("20년", "20", full_data.general$W_27) full_data.general$W_27 <- gsub("21년", "21", full_data.general$W_27) full_data.general$W_27 <- gsub("22년", "22", full_data.general$W_27) full_data.general$W_27 <- gsub("23년", "23", full_data.general$W_27) full_data.general$W_27 <- gsub("24년", "24", full_data.general$W_27) full_data.general$W_27 <- gsub("25년", "25", full_data.general$W_27) full_data.general$W_27 <- gsub("26년", "26", full_data.general$W_27) full_data.general$W_27 <- gsub("27년", "27", full_data.general$W_27) full_data.general$W_27 <- gsub("28년", "28", full_data.general$W_27) full_data.general$W_27 <- gsub("29년", "29", full_data.general$W_27) full_data.general$W_27 <- gsub("30년", "30", full_data.general$W_27) full_data.general$W_27 <- gsub("31년", "31", full_data.general$W_27) full_data.general$W_27 <- gsub("32년", "32", full_data.general$W_27) full_data.general$W_27 <- gsub("33년", "33", full_data.general$W_27) full_data.general$W_27 <- gsub("34년", "34", full_data.general$W_27) full_data.general$W_27 <- gsub("35년", "35", full_data.general$W_27) full_data.general$W_27 <- gsub("36년", "36", full_data.general$W_27) full_data.general$W_27 <- gsub("37년", "37", full_data.general$W_27) full_data.general$W_27 <- gsub("38년", "38", full_data.general$W_27) full_data.general$W_27 <- gsub("39년", "39", full_data.general$W_27) full_data.general$W_27 <- gsub("40년", "40", full_data.general$W_27) full_data.general$W_27 <- gsub("41년", "41", full_data.general$W_27) full_data.general$W_27 <- gsub("48년", "48", full_data.general$W_27) full_data.general$W_27 <- gsub("63년", "63", full_data.general$W_27) full_data.priorty$W_27 <- gsub("00년", "0", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("01년", "1", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("02년", "2", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("03년", "3", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("04년", "4", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("05년", "5", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("06년", "6", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("07년", "7", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("08년", "8", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("09년", "9", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("10년", "10", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("11년", "11", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("12년", "12", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("13년", "13", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("14년", "14", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("15년", "15", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("16년", "16", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("17년", "17", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("18년", "18", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("19년", "19", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("20년", "20", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("21년", "21", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("22년", "22", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("23년", "23", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("24년", "24", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("25년", "25", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("26년", "26", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("27년", "27", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("28년", "28", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("29년", "29", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("30년", "30", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("31년", "31", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("32년", "32", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("33년", "33", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("34년", "34", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("35년", "35", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("36년", "36", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("37년", "37", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("38년", "38", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("39년", "39", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("40년", "40", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("41년", "41", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("48년", "48", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("63년", "63", full_data.priorty$W_27)
full_data.general$W_38 <- gsub("0년", "0", full_data.general$W_38) full_data.general$W_38 <- gsub("1년", "1", full_data.general$W_38) full_data.general$W_38 <- gsub("2년", "2", full_data.general$W_38) full_data.general$W_38 <- gsub("3년", "3", full_data.general$W_38) full_data.general$W_38 <- gsub("4년", "4", full_data.general$W_38) full_data.general$W_38 <- gsub("5년", "5", full_data.general$W_38) full_data.priorty$W_38 <- gsub("0년", "0", full_data.priorty$W_38) full_data.priorty$W_38 <- gsub("1년", "1", full_data.priorty$W_38) full_data.priorty$W_38 <- gsub("2년", "2", full_data.priorty$W_38) full_data.priorty$W_38 <- gsub("3년", "3", full_data.priorty$W_38) full_data.priorty$W_38 <- gsub("4년", "4", full_data.priorty$W_38) full_data.priorty$W_38 <- gsub("5년", "5", full_data.priorty$W_38)
full_data.general$W_39 <- gsub('1순위', '1st', full_data.general$W_39) full_data.general$W_39 <- gsub('2순위', '2nd', full_data.general$W_39) full_data.priorty$W_39 <- gsub('1순위', '1st', full_data.priorty$W_39) full_data.priorty$W_39 <- gsub('2순위', '2nd', full_data.priorty$W_39)
full_data.general$W_40 <- gsub('당해', 'RESI', full_data.general$W_40) full_data.general$W_40 <- gsub('타', 'N_RESI', full_data.general$W_40) full_data.priorty$W_40 <- gsub('당해', 'RESI', full_data.priorty$W_40) full_data.priorty$W_40 <- gsub('타', 'N_RESI', full_data.priorty$W_40)
summary(full_data.priorty)
highage_26 <- subset(full_data.priorty, W_3 == '26F' & (W_14 == 'PH' | W_14 == 'GH' | W_14 == 'NH')) highage_36 <- subset(full_data.priorty, W_3 == '36F' & (W_14 == 'PH' | W_14 == 'GH' | W_14 == 'NH')) highage_46 <- subset(full_data.priorty, W_3 == '46F' & (W_14 == 'PH' | W_14 == 'GH' | W_14 == 'NH')) write.table(highage_26, 'highage_26.csv') write.table(highage_36, 'highage_36.csv') write.table(highage_46, 'highage_46.csv') ## 장애인 disabled_26 <- subset(full_data.priorty, W_3 == '26F' & (W_14 == 'PD' | W_14 == 'GD' | W_14 == 'ND')) disabled_36 <- subset(full_data.priorty, W_3 == '36F' & (W_14 == 'PD' | W_14 == 'GD' | W_14 == 'ND')) disabled_46 <- subset(full_data.priorty, W_3 == '46F' & (W_14 == 'PD' | W_14 == 'GD' | W_14 == 'ND')) write.table(disabled_26, 'disabled_26.csv') write.table(disabled_36, 'disabled_36.csv') write.table(disabled_46, 'disabled_46.csv') ## 신혼부부 married_46 <- subset(full_data.priorty, W_3 == '46F' & (W_14 == 'PM' | W_14 == 'GM' | W_14 == 'NM')) write.table(married_46, 'married_46.csv') ## 일반공급 general_26 <- full_data.general %>% filter(W_3 == "26F" & W_14 %in% c('ND', 'GD', 'GG', 'GH', 'NG', 'NH', 'GC', 'GN', 'NHAN', 'GHAN', 'NN', 'NM', 'NBOOK', 'GBOOK', 'NGEUN', 'GM', 'GGEUN', 'NC')) general_36 <- full_data.general %>% filter(W_3 == "36F" & W_14 %in% c('ND', 'GD', 'GG', 'GH', 'NG', 'NH', 'GC', 'GN', 'NHAN', 'GHAN', 'NN', 'NM', 'NBOOK', 'GBOOK', 'NGEUN', 'GM', 'GGEUN', 'NC')) general_46 <- full_data.general %>% filter(W_3 == "46F" & W_14 %in% c('ND', 'GD', 'GG', 'GH', 'NG', 'NH', 'GC', 'GN', 'NHAN', 'GHAN', 'NN', 'NM', 'NBOOK', 'GBOOK', 'NGEUN', 'GM', 'GGEUN', 'NC')) write.table(general_26, 'general_26.csv') write.table(general_26, 'general_36.csv') write.table(general_26, 'general_46.csv')
library(h2o)
localH2O <- h2o.init(max_mem_size = '1g') ## using a max 1GB of RAM
h2o.removeAll() ## clean slate - just in case the cluster was already running
highage_26 <- h2o.importFile(path = 'highage_26.csv')
highage_26
splits <- h2o.splitFrame(disabled_26, c(0.6, 0.2), seed = 1234)
highage_26 <- h2o.importFile(path = normalizePath('highage_26.csv'))
highage_26
splits <- h2o.splitFrame(highage_26, c(0.6, 0.2), seed = 1234)
train <- h2o.assign(splits[[1]], "train.hex") # 60%
valid <- h2o.assign(splits[[1]], "valid.hex") # 60%
test <- h2o.assign(splits[[1]], "test.hex") # 60%
response = 'W_4' # 당첨/탈락 여부 필드
predictors <- setdiff(names(disabled_26), response)
predictors
m1 <- h2o.deeplearning(   model_id = "dl_model_first",   training_frame = train,   validation_frame = valid, ## validation dataset: used for scoring and early stopping   x = predictors,   y = response,   #activation="Rectifier",  ## default   #hidden=c(200,200),       ## default: 2 hidden layers with 200 neurons each   epochs = 1,   variable_importances = T ## not enabled by default )
response = 'W_4' # 당첨/탈락 여부 필드
predictors <- setdiff(names(disabled_26), response)
predictors
response = 'W_4' # 당첨/탈락 여부 필드
predictors <- setdiff(names(highage_26), response)
predictors
m1 <- h2o.deeplearning(   model_id = "dl_model_first",   training_frame = train,   validation_frame = valid, ## validation dataset: used for scoring and early stopping   x = predictors,   y = response,   #activation="Rectifier",  ## default   #hidden=c(200,200),       ## default: 2 hidden layers with 200 neurons each   epochs = 1,   variable_importances = T ## not enabled by default )
highage_26$W_4
highage_26
response = 'W_6' # 당첨/탈락 여부 필드
predictors <- setdiff(names(highage_26), response)
predictors
highage_26$W_4
m1 <- h2o.deeplearning(   model_id = "dl_model_first",   training_frame = train,   validation_frame = valid, ## validation dataset: used for scoring and early stopping   x = predictors,   y = response,   #activation="Rectifier",  ## default   #hidden=c(200,200),       ## default: 2 hidden layers with 200 neurons each   epochs = 1,   variable_importances = T ## not enabled by default )
summary(m1)
head(as.data.frame(h2o.varimp(m1)))
highage_26 <- read.table('highage_26.csv', header = TRUE)
library(h2o)
localH2O <- h2o.init(max_mem_size = '1g') ## using a max 1GB of RAM
h2o.removeAll() ## clean slate - just in case the cluster was already running
highage_26 <- read.table('highage_26.csv', header = TRUE)
as.h2o(highage_26)
highage_26 <- as.h2o(highage_26)
highage_26
splits <- h2o.splitFrame(highage_26, c(0.6, 0.2), seed = 1234)
train <- h2o.assign(splits[[1]], "train.hex") # 60%
valid <- h2o.assign(splits[[1]], "valid.hex") # 60%
test <- h2o.assign(splits[[1]], "test.hex") # 60%
response = 'W_4' # 당첨/탈락 여부 필드
predictors <- setdiff(names(highage_26), response)
predictors
m1 <- h2o.deeplearning(   model_id = "dl_model_first",   training_frame = train,   validation_frame = valid, ## validation dataset: used for scoring and early stopping   x = predictors,   y = response,   #activation="Rectifier",  ## default   #hidden=c(200,200),       ## default: 2 hidden layers with 200 neurons each   epochs = 1,   variable_importances = T ## not enabled by default )
summary(m1)
summary(m1)
head(as.data.frame(h2o.varimp(m1)))
library(stringr)
library(dplyr)
full_data <- read.csv('full_data1011v1.csv', encoding = 'EUC-KR')
head(full_data)
full_data.priorty <- subset(full_data, W_14 %in% c('우고', '일고', 'N고', '우장', '일장', 'N장', '우신', '일신', 'N신') )
full_data.general <- full_data %>% filter(!str_detect(W_14, "우"))
full_data.general$REGNUM_BLOCK <- gsub('호평', 'HO', full_data.general$REGNUM_BLOCK)
full_data.priorty$REGNUM_BLOCK <- gsub('호평', 'HO', full_data.priorty$REGNUM_BLOCK)
full_data.general$BLOCK_NM <- gsub('호평', 'HO', full_data.general$BLOCK_NM)
full_data.priorty$BLOCK_NM <- gsub('호평', 'HO', full_data.priorty$BLOCK_NM)
full_data.general$W_3 <- gsub('26형', '26F', full_data.general$W_3) full_data.general$W_3 <- gsub('36형', '36F', full_data.general$W_3) full_data.general$W_3 <- gsub('46형', '46F', full_data.general$W_3) full_data.priorty$W_3 <- gsub('26형', '26F', full_data.priorty$W_3) full_data.priorty$W_3 <- gsub('36형', '36F', full_data.priorty$W_3) full_data.priorty$W_3 <- gsub('46형', '46F', full_data.priorty$W_3)
full_data.general$W_4 <- gsub('당첨', 'W', full_data.general$W_4) full_data.general$W_4 <- gsub('예비', 'R', full_data.general$W_4) full_data.general$W_4 <- gsub('낙첨', 'L', full_data.general$W_4) full_data.priorty$W_4 <- gsub('당첨', 'W', full_data.priorty$W_4) full_data.priorty$W_4 <- gsub('예비', 'R', full_data.priorty$W_4) full_data.priorty$W_4 <- gsub('낙첨', 'L', full_data.priorty$W_4)
full_data.general$W_13 <- gsub('1순위', '1st', full_data.general$W_13) full_data.general$W_13 <- gsub('2순위', '2nd', full_data.general$W_13) full_data.general$W_13 <- gsub('3순위', '3rd', full_data.general$W_13) full_data.priorty$W_13 <- gsub('1순위', '1st', full_data.priorty$W_13) full_data.priorty$W_13 <- gsub('2순위', '2nd', full_data.priorty$W_13) full_data.priorty$W_13 <- gsub('3순위', '3rd', full_data.priorty$W_13)
full_data.general$W_14 <- gsub('N장', 'ND', full_data.general$W_14) full_data.general$W_14 <- gsub('일장', 'GD', full_data.general$W_14) full_data.general$W_14 <- gsub('일일', 'GG', full_data.general$W_14) full_data.general$W_14 <- gsub('일고', 'GH', full_data.general$W_14) full_data.general$W_14 <- gsub('N일', 'NG', full_data.general$W_14) full_data.general$W_14 <- gsub('N고', 'NH', full_data.general$W_14) full_data.general$W_14 <- gsub('일중', 'GC', full_data.general$W_14) full_data.general$W_14 <- gsub('일노', 'GN', full_data.general$W_14) full_data.general$W_14 <- gsub('N한', 'NHAN', full_data.general$W_14) full_data.general$W_14 <- gsub('일한', 'GHAN', full_data.general$W_14) full_data.general$W_14 <- gsub('N노', 'NN', full_data.general$W_14) full_data.general$W_14 <- gsub('N신', 'NM', full_data.general$W_14) full_data.general$W_14 <- gsub('N북', 'NBOOK', full_data.general$W_14) full_data.general$W_14 <- gsub('일북', 'GBOOK', full_data.general$W_14) full_data.general$W_14 <- gsub('N근', 'NGEUN', full_data.general$W_14) full_data.general$W_14 <- gsub('일신', 'GM', full_data.general$W_14) full_data.general$W_14 <- gsub('일근', 'GGEUN', full_data.general$W_14) full_data.general$W_14 <- gsub('N중', 'NC', full_data.general$W_14) full_data.priorty$W_14 <- gsub('우고', 'PH', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('일고', 'GH', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('N고', 'NH', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('우장', 'PD', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('일장', 'GD', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('N장', 'ND', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('우신', 'PM', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('일신', 'GM', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('N신', 'NM', full_data.priorty$W_14)
full_data.general$W_15 <- gsub('장애없음', 'N', full_data.general$W_15) full_data.general$W_15 <- gsub('6급', '6R', full_data.general$W_15) full_data.general$W_15 <- gsub('5급', '5R', full_data.general$W_15) full_data.general$W_15 <- gsub('4급', '4R', full_data.general$W_15) full_data.general$W_15 <- gsub('3급', '3R', full_data.general$W_15) full_data.general$W_15 <- gsub('2급', '2R', full_data.general$W_15) full_data.general$W_15 <- gsub('1급', '1R', full_data.general$W_15) full_data.priorty$W_15 <- gsub('장애없음', 'N', full_data.priorty$W_15) full_data.priorty$W_15 <- gsub('6급', '6R', full_data.priorty$W_15) full_data.priorty$W_15 <- gsub('5급', '5R', full_data.priorty$W_15) full_data.priorty$W_15 <- gsub('4급', '4R', full_data.priorty$W_15) full_data.priorty$W_15 <- gsub('3급', '3R', full_data.priorty$W_15) full_data.priorty$W_15 <- gsub('2급', '2R', full_data.priorty$W_15) full_data.priorty$W_15 <- gsub('1급', '1R', full_data.priorty$W_15)
full_data.general$W_18 <- gsub('당해', 'RESI', full_data.general$W_18) full_data.general$W_18 <- gsub('타', 'N_RESI', full_data.general$W_18) full_data.priorty$W_18 <- gsub('당해', 'RESI', full_data.priorty$W_18) full_data.priorty$W_18 <- gsub('타', 'N_RESI', full_data.priorty$W_18)
full_data.general$W_27 <- gsub("00년", "0", full_data.general$W_27) full_data.general$W_27 <- gsub("01년", "1", full_data.general$W_27) full_data.general$W_27 <- gsub("02년", "2", full_data.general$W_27) full_data.general$W_27 <- gsub("03년", "3", full_data.general$W_27) full_data.general$W_27 <- gsub("04년", "4", full_data.general$W_27) full_data.general$W_27 <- gsub("05년", "5", full_data.general$W_27) full_data.general$W_27 <- gsub("06년", "6", full_data.general$W_27) full_data.general$W_27 <- gsub("07년", "7", full_data.general$W_27) full_data.general$W_27 <- gsub("08년", "8", full_data.general$W_27) full_data.general$W_27 <- gsub("09년", "9", full_data.general$W_27) full_data.general$W_27 <- gsub("10년", "10", full_data.general$W_27) full_data.general$W_27 <- gsub("11년", "11", full_data.general$W_27) full_data.general$W_27 <- gsub("12년", "12", full_data.general$W_27) full_data.general$W_27 <- gsub("13년", "13", full_data.general$W_27) full_data.general$W_27 <- gsub("14년", "14", full_data.general$W_27) full_data.general$W_27 <- gsub("15년", "15", full_data.general$W_27) full_data.general$W_27 <- gsub("16년", "16", full_data.general$W_27) full_data.general$W_27 <- gsub("17년", "17", full_data.general$W_27) full_data.general$W_27 <- gsub("18년", "18", full_data.general$W_27) full_data.general$W_27 <- gsub("19년", "19", full_data.general$W_27) full_data.general$W_27 <- gsub("20년", "20", full_data.general$W_27) full_data.general$W_27 <- gsub("21년", "21", full_data.general$W_27) full_data.general$W_27 <- gsub("22년", "22", full_data.general$W_27) full_data.general$W_27 <- gsub("23년", "23", full_data.general$W_27) full_data.general$W_27 <- gsub("24년", "24", full_data.general$W_27) full_data.general$W_27 <- gsub("25년", "25", full_data.general$W_27) full_data.general$W_27 <- gsub("26년", "26", full_data.general$W_27) full_data.general$W_27 <- gsub("27년", "27", full_data.general$W_27) full_data.general$W_27 <- gsub("28년", "28", full_data.general$W_27) full_data.general$W_27 <- gsub("29년", "29", full_data.general$W_27) full_data.general$W_27 <- gsub("30년", "30", full_data.general$W_27) full_data.general$W_27 <- gsub("31년", "31", full_data.general$W_27) full_data.general$W_27 <- gsub("32년", "32", full_data.general$W_27) full_data.general$W_27 <- gsub("33년", "33", full_data.general$W_27) full_data.general$W_27 <- gsub("34년", "34", full_data.general$W_27) full_data.general$W_27 <- gsub("35년", "35", full_data.general$W_27) full_data.general$W_27 <- gsub("36년", "36", full_data.general$W_27) full_data.general$W_27 <- gsub("37년", "37", full_data.general$W_27) full_data.general$W_27 <- gsub("38년", "38", full_data.general$W_27) full_data.general$W_27 <- gsub("39년", "39", full_data.general$W_27) full_data.general$W_27 <- gsub("40년", "40", full_data.general$W_27) full_data.general$W_27 <- gsub("41년", "41", full_data.general$W_27) full_data.general$W_27 <- gsub("48년", "48", full_data.general$W_27) full_data.general$W_27 <- gsub("63년", "63", full_data.general$W_27) full_data.priorty$W_27 <- gsub("00년", "0", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("01년", "1", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("02년", "2", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("03년", "3", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("04년", "4", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("05년", "5", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("06년", "6", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("07년", "7", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("08년", "8", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("09년", "9", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("10년", "10", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("11년", "11", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("12년", "12", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("13년", "13", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("14년", "14", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("15년", "15", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("16년", "16", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("17년", "17", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("18년", "18", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("19년", "19", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("20년", "20", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("21년", "21", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("22년", "22", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("23년", "23", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("24년", "24", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("25년", "25", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("26년", "26", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("27년", "27", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("28년", "28", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("29년", "29", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("30년", "30", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("31년", "31", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("32년", "32", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("33년", "33", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("34년", "34", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("35년", "35", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("36년", "36", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("37년", "37", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("38년", "38", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("39년", "39", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("40년", "40", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("41년", "41", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("48년", "48", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("63년", "63", full_data.priorty$W_27)
full_data.general$W_38 <- gsub("해당없음", "N", full_data.general$W_38) full_data.general$W_38 <- gsub("0년", "0", full_data.general$W_38) full_data.general$W_38 <- gsub("1년", "1", full_data.general$W_38) full_data.general$W_38 <- gsub("2년", "2", full_data.general$W_38) full_data.general$W_38 <- gsub("3년", "3", full_data.general$W_38) full_data.general$W_38 <- gsub("4년", "4", full_data.general$W_38) full_data.general$W_38 <- gsub("5년", "5", full_data.general$W_38) full_data.priorty$W_38 <- gsub("해당없음", "N", full_data.priorty$W_38) full_data.priorty$W_38 <- gsub("0년", "0", full_data.priorty$W_38) full_data.priorty$W_38 <- gsub("1년", "1", full_data.priorty$W_38) full_data.priorty$W_38 <- gsub("2년", "2", full_data.priorty$W_38) full_data.priorty$W_38 <- gsub("3년", "3", full_data.priorty$W_38) full_data.priorty$W_38 <- gsub("4년", "4", full_data.priorty$W_38) full_data.priorty$W_38 <- gsub("5년", "5", full_data.priorty$W_38)
full_data.general$W_39 <- gsub('해당없음', 'N', full_data.general$W_39) full_data.general$W_39 <- gsub('1순위', '1st', full_data.general$W_39) full_data.general$W_39 <- gsub('2순위', '2nd', full_data.general$W_39) full_data.priorty$W_39 <- gsub('해당없음', 'N', full_data.priorty$W_39) full_data.priorty$W_39 <- gsub('1순위', '1st', full_data.priorty$W_39) full_data.priorty$W_39 <- gsub('2순위', '2nd', full_data.priorty$W_39)
full_data.general$W_40 <- gsub('해당없음', 'N', full_data.general$W_40) full_data.general$W_40 <- gsub('당해', 'RESI', full_data.general$W_40) full_data.general$W_40 <- gsub('타', 'N_RESI', full_data.general$W_40) full_data.priorty$W_40 <- gsub('해당없음', 'N', full_data.priorty$W_40) full_data.priorty$W_40 <- gsub('당해', 'RESI', full_data.priorty$W_40) full_data.priorty$W_40 <- gsub('타', 'N_RESI', full_data.priorty$W_40)
summary(full_data.priorty)
highage_26 <- subset(full_data.priorty, W_3 == '26F' & (W_14 == 'PH' | W_14 == 'GH' | W_14 == 'NH'))
highage_36 <- subset(full_data.priorty, W_3 == '36F' & (W_14 == 'PH' | W_14 == 'GH' | W_14 == 'NH'))
highage_46 <- subset(full_data.priorty, W_3 == '46F' & (W_14 == 'PH' | W_14 == 'GH' | W_14 == 'NH'))
write.table(highage_26, 'highage_26.csv') write.table(highage_36, 'highage_36.csv') write.table(highage_46, 'highage_46.csv')
disabled_26 <- subset(full_data.priorty, W_3 == '26F' & (W_14 == 'PD' | W_14 == 'GD' | W_14 == 'ND'))
disabled_36 <- subset(full_data.priorty, W_3 == '36F' & (W_14 == 'PD' | W_14 == 'GD' | W_14 == 'ND'))
disabled_46 <- subset(full_data.priorty, W_3 == '46F' & (W_14 == 'PD' | W_14 == 'GD' | W_14 == 'ND'))
write.table(disabled_26, 'disabled_26.csv') write.table(disabled_36, 'disabled_36.csv') write.table(disabled_46, 'disabled_46.csv')
married_46 <- subset(full_data.priorty, W_3 == '46F' & (W_14 == 'PM' | W_14 == 'GM' | W_14 == 'NM'))
write.table(married_46, 'married_46.csv')
general_26 <- full_data.general %>% filter(W_3 == "26F" & W_14 %in% c('ND', 'GD', 'GG', 'GH', 'NG', 'NH', 'GC', 'GN', 'NHAN', 'GHAN', 'NN', 'NM', 'NBOOK', 'GBOOK', 'NGEUN', 'GM', 'GGEUN', 'NC')) general_36 <- full_data.general %>% filter(W_3 == "36F" & W_14 %in% c('ND', 'GD', 'GG', 'GH', 'NG', 'NH', 'GC', 'GN', 'NHAN', 'GHAN', 'NN', 'NM', 'NBOOK', 'GBOOK', 'NGEUN', 'GM', 'GGEUN', 'NC')) general_46 <- full_data.general %>% filter(W_3 == "46F" & W_14 %in% c('ND', 'GD', 'GG', 'GH', 'NG', 'NH', 'GC', 'GN', 'NHAN', 'GHAN', 'NN', 'NM', 'NBOOK', 'GBOOK', 'NGEUN', 'GM', 'GGEUN', 'NC'))
write.table(general_26, 'general_26.csv')
write.table(general_26, 'general_36.csv')
write.table(general_26, 'general_46.csv')
library(h2o)
install.packages("h2o")
library(h2o)
rm(list = ls())
localH2O <- h2o.init(max_mem_size = '1g') ## using a max 1GB of RAM
h2o.removeAll() ## clean slate - just in case the cluster was already running
highage_26 <- read.table('highage_26.csv', header = TRUE)
as.h2o(highage_26)
highage_26 <- as.h2o(highage_26)
highage_26
splits <- h2o.splitFrame(highage_26, c(0.6, 0.2), seed = 1234)
train <- h2o.assign(splits[[1]], "train.hex") # 60%
valid <- h2o.assign(splits[[1]], "valid.hex") # 60%
test <- h2o.assign(splits[[1]], "test.hex") # 60%
response = 'W_4' # 당첨/탈락 여부 필드
predictors <- setdiff(names(highage_26), response)
predictors
m1 <- h2o.deeplearning(   model_id = "dl_model_first",   training_frame = train,   validation_frame = valid, ## validation dataset: used for scoring and early stopping   x = predictors,   y = response,   #activation="Rectifier",  ## default   #hidden=c(200,200),       ## default: 2 hidden layers with 200 neurons each   epochs = 1,   variable_importances = T ## not enabled by default )
summary(m1)
m1 <- h2o.deeplearning(   model_id = "dl_model_first",   training_frame = train,   validation_frame = valid, ## validation dataset: used for scoring and early stopping   x = predictors,   y = response,   #activation="Rectifier",  ## default   #hidden=c(200,200),       ## default: 2 hidden layers with 200 neurons each   epochs = 1,   variable_importances = T ## not enabled by default )
highage_26$W_33
head(as.data.frame(h2o.varimp(m1)))
m1@allparameters
pred <- h2o.predict(m1, test)
pred
pred <- h2o.predict(object = m1, newdata = test)
Yhat = as.data.frame(Yhat = pred$predict)
pred
Yhat = as.data.frame(Yhat = pred$predict)
as.data.frame(Yhat = pred$predict)
pred$predict
as.data.frame(Yhat = pred$predict)
Yhat = as.data.frame(Yhat = pred$predict)
Yhat = as.data.frame(pred$predict)
Yhat
out <- as.data.frame(cbind(test,Yhat))
out <- cbind(test,Yhat)
cbind(test,Yhat)
test
cbind(test,Yhat)
cbind(test,"1")
cbind(test,Yhat)
Yhat
out <- cbind(test, Yhat$predict)
head(out)
out
cbind(test, Yhat$predict)
test
out   = as.data.frame(cbind(test,Yhat))
?as.data.frame
as.data.frame(pred$predict, row.names=NULL, optional = FALSE)
as.data.frame(pred$predict, row.names=NULL)
nrow(test)
nrow(pred$predict)
cbind(test, Yhat)
cbind(test, Yhat$predict)
pred <- h2o.predict(m1, test)
pred
test$Accuracy <- pred$predict == test$W_4
1-mean(test$Accuracy)
1 - mean(test$Accuracy)
1 - test$Accuracy
## 평균 정확도 : 15%
1 - mean(test$Accuracy)
train
rf1 <- h2o.randomForest(## h2o.randomForest function   training_frame = train, ## the H2O frame for training   validation_frame = valid, ## the H2O frame for validation (not required)   x = predictors, ## the predictor columns, by column index   y = response, ## the target index (what we are predicting)   model_id = "rf_covType_v1", ## name the model in H2O                                  ##   not required, but helps use Flow   ntrees = 200, ## use a maximum of 200 trees to create the                                  ##  random forest model. The default is 50.                                  ##  I have increased it because I will let                                   ##  the early stopping criteria decide when                                  ##  the random forest is sufficiently accurate   stopping_rounds = 2, ## Stop fitting new trees when the 2-tree                                  ##  average is within 0.001 (default) of                                   ##  the prior two 2-tree averages.                                  ##  Can be thought of as a convergence setting   score_each_iteration = T, ## Predict against training and validation for                                  ##  each tree. Default will skip several.   seed = 1000000) ## Set the random seed so that this can be
summary(rf1)
rf1@model$validation_metrics
h2o.hit_ratio_table(rf1, valid = T)[1, 2]
rf1@model$validation_metrics
gbm1 <- h2o.gbm(   training_frame = train, ## the H2O frame for training   validation_frame = valid, ## the H2O frame for validation (not required)   x = predictors, ## the predictor columns, by column index   y = response, ## the target index (what we are predicting)   model_id = "gbm_covType1", ## name the model in H2O   seed = 2000000) ## Set the random seed for reproducability
summary(gbm1)
h2o.hit_ratio_table(gbm1, valid = T)[1, 2]
finalRf_predictions <- h2o.predict(   object = rf1   , newdata = test)
finalRf_predictions
mean(finalRf_predictions$predict == test$W_4) ## test set accuracy
finalgbm_predictions <- h2o.predict(   object = gbm1   , newdata = test)
finalgbm_predictions
mean(finalgbm_predictions$predict == test$W_4) ##1?? 왜 1인지 test set accuracy
localH2O <- h2o.init(max_mem_size = '1g') ## using a max 1GB of RAM
h2o.removeAll() ## clean slate - just in case the cluster was already running
highage_26 <- read.table('highage_26.csv', header = TRUE)
highage_26 <- as.h2o(highage_26)
highage_26
splits <- h2o.splitFrame(highage_26, c(0.6, 0.2), seed = 1234)
train <- h2o.assign(splits[[1]], "train.hex") # 60%
valid <- h2o.assign(splits[[1]], "valid.hex") # 60%
test <- h2o.assign(splits[[1]], "test.hex") # 60%
response = 'W_4' # 당첨/탈락 여부 필드
predictors <- setdiff(names(highage_26), response)
predictors
rf1 <- h2o.randomForest(## h2o.randomForest function   training_frame = train, ## the H2O frame for training   validation_frame = valid, ## the H2O frame for validation (not required)   x = predictors, ## the predictor columns, by column index   y = response, ## the target index (what we are predicting)   model_id = "rf_covType_v1", ## name the model in H2O                                  ##   not required, but helps use Flow   ntrees = 200, ## use a maximum of 200 trees to create the                                  ##  random forest model. The default is 50.                                  ##  I have increased it because I will let                                   ##  the early stopping criteria decide when                                  ##  the random forest is sufficiently accurate   stopping_rounds = 2, ## Stop fitting new trees when the 2-tree                                  ##  average is within 0.001 (default) of                                   ##  the prior two 2-tree averages.                                  ##  Can be thought of as a convergence setting   score_each_iteration = T, ## Predict against training and validation for                                  ##  each tree. Default will skip several.   seed = 1000000)
summary(rf1)
finalRf_predictions <- h2o.predict(   object = rf1   , newdata = test)
finalRf_predictions
mean(finalRf_predictions$predict == test$W_4) ##1?? 왜 1인지 test set accuracy
test$Accuracy <- finalRf_predictions$predict == test$W_4
1 - mean(test$Accuracy)
mean(finalRf_predictions$predict == test$W_4) ##1?? 왜 1인지 test set accuracy
full_data <- read.csv('full_data1011v1.csv', encoding = 'EUC-KR')
head(full_data)
full_data.priorty <- subset(full_data, W_14 %in% c('우고', '일고', 'N고', '우장', '일장', 'N장', '우신', '일신', 'N신') )
full_data.general <- full_data %>% filter(!str_detect(W_14, "우"))
full_data.general$REGNUM_BLOCK <- gsub('호평', 'HO', full_data.general$REGNUM_BLOCK) full_data.priorty$REGNUM_BLOCK <- gsub('호평', 'HO', full_data.priorty$REGNUM_BLOCK)
full_data.general$BLOCK_NM <- gsub('호평', 'HO', full_data.general$BLOCK_NM) full_data.priorty$BLOCK_NM <- gsub('호평', 'HO', full_data.priorty$BLOCK_NM)
full_data.general$W_3 <- gsub('26형', '26F', full_data.general$W_3) full_data.general$W_3 <- gsub('36형', '36F', full_data.general$W_3) full_data.general$W_3 <- gsub('46형', '46F', full_data.general$W_3) full_data.priorty$W_3 <- gsub('26형', '26F', full_data.priorty$W_3) full_data.priorty$W_3 <- gsub('36형', '36F', full_data.priorty$W_3) full_data.priorty$W_3 <- gsub('46형', '46F', full_data.priorty$W_3)
full_data.general$W_4 <- gsub('당첨', 'W', full_data.general$W_4) full_data.general$W_4 <- gsub('예비', 'L', full_data.general$W_4) full_data.general$W_4 <- gsub('낙첨', 'L', full_data.general$W_4) full_data.priorty$W_4 <- gsub('당첨', 'W', full_data.priorty$W_4) full_data.priorty$W_4 <- gsub('예비', 'L', full_data.priorty$W_4) full_data.priorty$W_4 <- gsub('낙첨', 'L', full_data.priorty$W_4)
full_data.general$W_13 <- gsub('1순위', '1st', full_data.general$W_13) full_data.general$W_13 <- gsub('2순위', '2nd', full_data.general$W_13) full_data.general$W_13 <- gsub('3순위', '3rd', full_data.general$W_13) full_data.priorty$W_13 <- gsub('1순위', '1st', full_data.priorty$W_13) full_data.priorty$W_13 <- gsub('2순위', '2nd', full_data.priorty$W_13) full_data.priorty$W_13 <- gsub('3순위', '3rd', full_data.priorty$W_13)
full_data.general$W_14 <- gsub('N장', 'ND', full_data.general$W_14) full_data.general$W_14 <- gsub('일장', 'GD', full_data.general$W_14) full_data.general$W_14 <- gsub('일일', 'GG', full_data.general$W_14) full_data.general$W_14 <- gsub('일고', 'GH', full_data.general$W_14) full_data.general$W_14 <- gsub('N일', 'NG', full_data.general$W_14) full_data.general$W_14 <- gsub('N고', 'NH', full_data.general$W_14) full_data.general$W_14 <- gsub('일중', 'GC', full_data.general$W_14) full_data.general$W_14 <- gsub('일노', 'GN', full_data.general$W_14) full_data.general$W_14 <- gsub('N한', 'NHAN', full_data.general$W_14) full_data.general$W_14 <- gsub('일한', 'GHAN', full_data.general$W_14) full_data.general$W_14 <- gsub('N노', 'NN', full_data.general$W_14) full_data.general$W_14 <- gsub('N신', 'NM', full_data.general$W_14) full_data.general$W_14 <- gsub('N북', 'NBOOK', full_data.general$W_14) full_data.general$W_14 <- gsub('일북', 'GBOOK', full_data.general$W_14) full_data.general$W_14 <- gsub('N근', 'NGEUN', full_data.general$W_14) full_data.general$W_14 <- gsub('일신', 'GM', full_data.general$W_14) full_data.general$W_14 <- gsub('일근', 'GGEUN', full_data.general$W_14) full_data.general$W_14 <- gsub('N중', 'NC', full_data.general$W_14) full_data.priorty$W_14 <- gsub('우고', 'PH', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('일고', 'GH', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('N고', 'NH', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('우장', 'PD', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('일장', 'GD', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('N장', 'ND', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('우신', 'PM', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('일신', 'GM', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('N신', 'NM', full_data.priorty$W_14)
full_data.general$W_15 <- gsub('장애없음', 'N', full_data.general$W_15) full_data.general$W_15 <- gsub('6급', '6R', full_data.general$W_15) full_data.general$W_15 <- gsub('5급', '5R', full_data.general$W_15) full_data.general$W_15 <- gsub('4급', '4R', full_data.general$W_15) full_data.general$W_15 <- gsub('3급', '3R', full_data.general$W_15) full_data.general$W_15 <- gsub('2급', '2R', full_data.general$W_15) full_data.general$W_15 <- gsub('1급', '1R', full_data.general$W_15) full_data.priorty$W_15 <- gsub('장애없음', 'N', full_data.priorty$W_15) full_data.priorty$W_15 <- gsub('6급', '6R', full_data.priorty$W_15) full_data.priorty$W_15 <- gsub('5급', '5R', full_data.priorty$W_15) full_data.priorty$W_15 <- gsub('4급', '4R', full_data.priorty$W_15) full_data.priorty$W_15 <- gsub('3급', '3R', full_data.priorty$W_15) full_data.priorty$W_15 <- gsub('2급', '2R', full_data.priorty$W_15) full_data.priorty$W_15 <- gsub('1급', '1R', full_data.priorty$W_15)
full_data.general$W_18 <- gsub('당해', 'RESI', full_data.general$W_18) full_data.general$W_18 <- gsub('타', 'N_RESI', full_data.general$W_18) full_data.priorty$W_18 <- gsub('당해', 'RESI', full_data.priorty$W_18) full_data.priorty$W_18 <- gsub('타', 'N_RESI', full_data.priorty$W_18)
full_data.general$W_27 <- gsub("00년", "0", full_data.general$W_27) full_data.general$W_27 <- gsub("01년", "1", full_data.general$W_27) full_data.general$W_27 <- gsub("02년", "2", full_data.general$W_27) full_data.general$W_27 <- gsub("03년", "3", full_data.general$W_27) full_data.general$W_27 <- gsub("04년", "4", full_data.general$W_27) full_data.general$W_27 <- gsub("05년", "5", full_data.general$W_27) full_data.general$W_27 <- gsub("06년", "6", full_data.general$W_27) full_data.general$W_27 <- gsub("07년", "7", full_data.general$W_27) full_data.general$W_27 <- gsub("08년", "8", full_data.general$W_27) full_data.general$W_27 <- gsub("09년", "9", full_data.general$W_27) full_data.general$W_27 <- gsub("10년", "10", full_data.general$W_27) full_data.general$W_27 <- gsub("11년", "11", full_data.general$W_27) full_data.general$W_27 <- gsub("12년", "12", full_data.general$W_27) full_data.general$W_27 <- gsub("13년", "13", full_data.general$W_27) full_data.general$W_27 <- gsub("14년", "14", full_data.general$W_27) full_data.general$W_27 <- gsub("15년", "15", full_data.general$W_27) full_data.general$W_27 <- gsub("16년", "16", full_data.general$W_27) full_data.general$W_27 <- gsub("17년", "17", full_data.general$W_27) full_data.general$W_27 <- gsub("18년", "18", full_data.general$W_27) full_data.general$W_27 <- gsub("19년", "19", full_data.general$W_27) full_data.general$W_27 <- gsub("20년", "20", full_data.general$W_27) full_data.general$W_27 <- gsub("21년", "21", full_data.general$W_27) full_data.general$W_27 <- gsub("22년", "22", full_data.general$W_27) full_data.general$W_27 <- gsub("23년", "23", full_data.general$W_27) full_data.general$W_27 <- gsub("24년", "24", full_data.general$W_27) full_data.general$W_27 <- gsub("25년", "25", full_data.general$W_27) full_data.general$W_27 <- gsub("26년", "26", full_data.general$W_27) full_data.general$W_27 <- gsub("27년", "27", full_data.general$W_27) full_data.general$W_27 <- gsub("28년", "28", full_data.general$W_27) full_data.general$W_27 <- gsub("29년", "29", full_data.general$W_27) full_data.general$W_27 <- gsub("30년", "30", full_data.general$W_27) full_data.general$W_27 <- gsub("31년", "31", full_data.general$W_27) full_data.general$W_27 <- gsub("32년", "32", full_data.general$W_27) full_data.general$W_27 <- gsub("33년", "33", full_data.general$W_27) full_data.general$W_27 <- gsub("34년", "34", full_data.general$W_27) full_data.general$W_27 <- gsub("35년", "35", full_data.general$W_27) full_data.general$W_27 <- gsub("36년", "36", full_data.general$W_27) full_data.general$W_27 <- gsub("37년", "37", full_data.general$W_27) full_data.general$W_27 <- gsub("38년", "38", full_data.general$W_27) full_data.general$W_27 <- gsub("39년", "39", full_data.general$W_27) full_data.general$W_27 <- gsub("40년", "40", full_data.general$W_27) full_data.general$W_27 <- gsub("41년", "41", full_data.general$W_27) full_data.general$W_27 <- gsub("48년", "48", full_data.general$W_27) full_data.general$W_27 <- gsub("63년", "63", full_data.general$W_27) full_data.priorty$W_27 <- gsub("00년", "0", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("01년", "1", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("02년", "2", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("03년", "3", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("04년", "4", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("05년", "5", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("06년", "6", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("07년", "7", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("08년", "8", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("09년", "9", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("10년", "10", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("11년", "11", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("12년", "12", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("13년", "13", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("14년", "14", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("15년", "15", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("16년", "16", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("17년", "17", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("18년", "18", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("19년", "19", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("20년", "20", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("21년", "21", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("22년", "22", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("23년", "23", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("24년", "24", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("25년", "25", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("26년", "26", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("27년", "27", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("28년", "28", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("29년", "29", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("30년", "30", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("31년", "31", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("32년", "32", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("33년", "33", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("34년", "34", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("35년", "35", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("36년", "36", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("37년", "37", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("38년", "38", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("39년", "39", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("40년", "40", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("41년", "41", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("48년", "48", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("63년", "63", full_data.priorty$W_27)
full_data.general$W_38 <- gsub("해당없음", "N", full_data.general$W_38) full_data.general$W_38 <- gsub("0년", "0", full_data.general$W_38) full_data.general$W_38 <- gsub("1년", "1", full_data.general$W_38) full_data.general$W_38 <- gsub("2년", "2", full_data.general$W_38) full_data.general$W_38 <- gsub("3년", "3", full_data.general$W_38) full_data.general$W_38 <- gsub("4년", "4", full_data.general$W_38) full_data.general$W_38 <- gsub("5년", "5", full_data.general$W_38) full_data.priorty$W_38 <- gsub("해당없음", "N", full_data.priorty$W_38) full_data.priorty$W_38 <- gsub("0년", "0", full_data.priorty$W_38) full_data.priorty$W_38 <- gsub("1년", "1", full_data.priorty$W_38) full_data.priorty$W_38 <- gsub("2년", "2", full_data.priorty$W_38) full_data.priorty$W_38 <- gsub("3년", "3", full_data.priorty$W_38) full_data.priorty$W_38 <- gsub("4년", "4", full_data.priorty$W_38) full_data.priorty$W_38 <- gsub("5년", "5", full_data.priorty$W_38)
full_data.general$W_39 <- gsub('해당없음', 'N', full_data.general$W_39) full_data.general$W_39 <- gsub('1순위', '1st', full_data.general$W_39) full_data.general$W_39 <- gsub('2순위', '2nd', full_data.general$W_39) full_data.priorty$W_39 <- gsub('해당없음', 'N', full_data.priorty$W_39) full_data.priorty$W_39 <- gsub('1순위', '1st', full_data.priorty$W_39) full_data.priorty$W_39 <- gsub('2순위', '2nd', full_data.priorty$W_39)
full_data.general$W_40 <- gsub('해당없음', 'N', full_data.general$W_40) full_data.general$W_40 <- gsub('당해', 'RESI', full_data.general$W_40) full_data.general$W_40 <- gsub('타', 'N_RESI', full_data.general$W_40) full_data.priorty$W_40 <- gsub('해당없음', 'N', full_data.priorty$W_40) full_data.priorty$W_40 <- gsub('당해', 'RESI', full_data.priorty$W_40) full_data.priorty$W_40 <- gsub('타', 'N_RESI', full_data.priorty$W_40)
highage_26 <- subset(full_data.priorty, W_3 == '26F' & (W_14 == 'PH' | W_14 == 'GH' | W_14 == 'NH')) highage_36 <- subset(full_data.priorty, W_3 == '36F' & (W_14 == 'PH' | W_14 == 'GH' | W_14 == 'NH')) highage_46 <- subset(full_data.priorty, W_3 == '46F' & (W_14 == 'PH' | W_14 == 'GH' | W_14 == 'NH'))
write.table(highage_26, 'highage_26.csv') write.table(highage_36, 'highage_36.csv') write.table(highage_46, 'highage_46.csv')
disabled_26 <- subset(full_data.priorty, W_3 == '26F' & (W_14 == 'PD' | W_14 == 'GD' | W_14 == 'ND')) disabled_36 <- subset(full_data.priorty, W_3 == '36F' & (W_14 == 'PD' | W_14 == 'GD' | W_14 == 'ND')) disabled_46 <- subset(full_data.priorty, W_3 == '46F' & (W_14 == 'PD' | W_14 == 'GD' | W_14 == 'ND')) write.table(disabled_26, 'disabled_26.csv') write.table(disabled_36, 'disabled_36.csv') write.table(disabled_46, 'disabled_46.csv')
married_46 <- subset(full_data.priorty, W_3 == '46F' & (W_14 == 'PM' | W_14 == 'GM' | W_14 == 'NM')) write.table(married_46, 'married_46.csv')
source("C:/kookmin_repository/R_h2o/R_h2o/data_div.R", echo = TRUE, encoding = "ks_c_5601-1987")
write.table(general_26, 'general_26.csv')
write.table(general_26, 'general_36.csv')
write.table(general_26, 'general_46.csv')
rm(list = ls())
library(h2o)
localH2O <- h2o.init(max_mem_size = '1g') ## using a max 1GB of RAM
h2o.removeAll() ## clean slate - just in case the cluster was already running
highage_26 <- read.table('highage_26.csv', header = TRUE)
highage_26 <- as.h2o(highage_26)
highage_26
splits <- h2o.splitFrame(highage_26, c(0.6, 0.2), seed = 1234)
train <- h2o.assign(splits[[1]], "train.hex") # 60%
valid <- h2o.assign(splits[[1]], "valid.hex") # 60%
test <- h2o.assign(splits[[1]], "test.hex") # 60%
response = 'W_4' # 당첨/탈락 여부 필드
predictors <- setdiff(names(highage_26), response)
predictors
m1 <- h2o.deeplearning(   model_id = "dl_model_first",   training_frame = train,   validation_frame = valid, ## validation dataset: used for scoring and early stopping   x = predictors,   y = response,   #activation="Rectifier",  ## default   #hidden=c(200,200),       ## default: 2 hidden layers with 200 neurons each   epochs = 1,   variable_importances = T ## not enabled by default )
summary(m1)
pred <- h2o.predict(m1, test)
pred
test$Accuracy <- pred$predict == test$W_4
1 - mean(test$Accuracy)
rf1 <- h2o.randomForest(## h2o.randomForest function   training_frame = train, ## the H2O frame for training   validation_frame = valid, ## the H2O frame for validation (not required)   x = predictors, ## the predictor columns, by column index   y = response, ## the target index (what we are predicting)   model_id = "rf_covType_v1", ## name the model in H2O                                  ##   not required, but helps use Flow   ntrees = 200, ## use a maximum of 200 trees to create the                                  ##  random forest model. The default is 50.                                  ##  I have increased it because I will let                                   ##  the early stopping criteria decide when                                  ##  the random forest is sufficiently accurate   stopping_rounds = 2, ## Stop fitting new trees when the 2-tree                                  ##  average is within 0.001 (default) of                                   ##  the prior two 2-tree averages.                                  ##  Can be thought of as a convergence setting   score_each_iteration = T, ## Predict against training and validation for                                  ##  each tree. Default will skip several.   seed = 1000000) ## Set the random seed so that this can be
summary(rf1)
test <- h2o.assign(splits[[1]], "test.hex") # 60%
finalRf_predictions <- h2o.predict(   object = rf1   , newdata = test)
finalRf_predictions
mean(finalRf_predictions$predict == test$W_4) ##1?? 왜 1인지 test set accuracy
test$Accuracy <- finalRf_predictions$predict == test$W_4
1 - mean(test$Accuracy)
full_data <- read.csv('full_data1011v1.csv', encoding = 'EUC-KR')
head(full_data)
full_data.priorty <- subset(full_data, W_14 %in% c('우고', '일고', 'N고', '우장', '일장', 'N장', '우신', '일신', 'N신') ) full_data.general <- full_data %>% filter(!str_detect(W_14, "우")) ## REGNUM_BLOCK 필드 full_data.general$REGNUM_BLOCK <- gsub('호평', 'HO', full_data.general$REGNUM_BLOCK) full_data.priorty$REGNUM_BLOCK <- gsub('호평', 'HO', full_data.priorty$REGNUM_BLOCK) ## BLOCK_NM 필드 full_data.general$BLOCK_NM <- gsub('호평', 'HO', full_data.general$BLOCK_NM) full_data.priorty$BLOCK_NM <- gsub('호평', 'HO', full_data.priorty$BLOCK_NM) ## W_3 필드 full_data.general$W_3 <- gsub('26형', '26F', full_data.general$W_3) full_data.general$W_3 <- gsub('36형', '36F', full_data.general$W_3) full_data.general$W_3 <- gsub('46형', '46F', full_data.general$W_3) full_data.priorty$W_3 <- gsub('26형', '26F', full_data.priorty$W_3) full_data.priorty$W_3 <- gsub('36형', '36F', full_data.priorty$W_3) full_data.priorty$W_3 <- gsub('46형', '46F', full_data.priorty$W_3) ## W_4 필드 full_data.general$W_4 <- gsub('당첨', 'W', full_data.general$W_4) full_data.general$W_4 <- gsub('예비', 'L', full_data.general$W_4) full_data.general$W_4 <- gsub('낙첨', 'L', full_data.general$W_4) full_data.priorty$W_4 <- gsub('당첨', 'W', full_data.priorty$W_4) full_data.priorty$W_4 <- gsub('예비', 'L', full_data.priorty$W_4) full_data.priorty$W_4 <- gsub('낙첨', 'L', full_data.priorty$W_4) ## W_13 필드 full_data.general$W_13 <- gsub('1순위', '1st', full_data.general$W_13) full_data.general$W_13 <- gsub('2순위', '2nd', full_data.general$W_13) full_data.general$W_13 <- gsub('3순위', '3rd', full_data.general$W_13) full_data.priorty$W_13 <- gsub('1순위', '1st', full_data.priorty$W_13) full_data.priorty$W_13 <- gsub('2순위', '2nd', full_data.priorty$W_13) full_data.priorty$W_13 <- gsub('3순위', '3rd', full_data.priorty$W_13) ## W_14 필드 unique(full_data.general$W_14) unique(full_data.priorty$W_14) full_data.general$W_14 <- gsub('N장', 'ND', full_data.general$W_14) full_data.general$W_14 <- gsub('일장', 'GD', full_data.general$W_14) full_data.general$W_14 <- gsub('일일', 'GG', full_data.general$W_14) full_data.general$W_14 <- gsub('일고', 'GH', full_data.general$W_14) full_data.general$W_14 <- gsub('N일', 'NG', full_data.general$W_14) full_data.general$W_14 <- gsub('N고', 'NH', full_data.general$W_14) full_data.general$W_14 <- gsub('일중', 'GC', full_data.general$W_14) full_data.general$W_14 <- gsub('일노', 'GN', full_data.general$W_14) full_data.general$W_14 <- gsub('N한', 'NHAN', full_data.general$W_14) full_data.general$W_14 <- gsub('일한', 'GHAN', full_data.general$W_14) full_data.general$W_14 <- gsub('N노', 'NN', full_data.general$W_14) full_data.general$W_14 <- gsub('N신', 'NM', full_data.general$W_14) full_data.general$W_14 <- gsub('N북', 'NBOOK', full_data.general$W_14) full_data.general$W_14 <- gsub('일북', 'GBOOK', full_data.general$W_14) full_data.general$W_14 <- gsub('N근', 'NGEUN', full_data.general$W_14) full_data.general$W_14 <- gsub('일신', 'GM', full_data.general$W_14) full_data.general$W_14 <- gsub('일근', 'GGEUN', full_data.general$W_14) full_data.general$W_14 <- gsub('N중', 'NC', full_data.general$W_14) full_data.priorty$W_14 <- gsub('우고', 'PH', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('일고', 'GH', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('N고', 'NH', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('우장', 'PD', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('일장', 'GD', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('N장', 'ND', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('우신', 'PM', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('일신', 'GM', full_data.priorty$W_14) full_data.priorty$W_14 <- gsub('N신', 'NM', full_data.priorty$W_14) ## W_15 full_data.general$W_15 <- gsub('장애없음', 'N', full_data.general$W_15) full_data.general$W_15 <- gsub('6급', '6R', full_data.general$W_15) full_data.general$W_15 <- gsub('5급', '5R', full_data.general$W_15) full_data.general$W_15 <- gsub('4급', '4R', full_data.general$W_15) full_data.general$W_15 <- gsub('3급', '3R', full_data.general$W_15) full_data.general$W_15 <- gsub('2급', '2R', full_data.general$W_15) full_data.general$W_15 <- gsub('1급', '1R', full_data.general$W_15) full_data.priorty$W_15 <- gsub('장애없음', 'N', full_data.priorty$W_15) full_data.priorty$W_15 <- gsub('6급', '6R', full_data.priorty$W_15) full_data.priorty$W_15 <- gsub('5급', '5R', full_data.priorty$W_15) full_data.priorty$W_15 <- gsub('4급', '4R', full_data.priorty$W_15) full_data.priorty$W_15 <- gsub('3급', '3R', full_data.priorty$W_15) full_data.priorty$W_15 <- gsub('2급', '2R', full_data.priorty$W_15) full_data.priorty$W_15 <- gsub('1급', '1R', full_data.priorty$W_15) ## W_16 ## W_18 full_data.general$W_18 <- gsub('당해', 'RESI', full_data.general$W_18) full_data.general$W_18 <- gsub('타', 'N_RESI', full_data.general$W_18) full_data.priorty$W_18 <- gsub('당해', 'RESI', full_data.priorty$W_18) full_data.priorty$W_18 <- gsub('타', 'N_RESI', full_data.priorty$W_18) ## W_27 full_data.general$W_27 <- gsub("00년", "0", full_data.general$W_27) full_data.general$W_27 <- gsub("01년", "1", full_data.general$W_27) full_data.general$W_27 <- gsub("02년", "2", full_data.general$W_27) full_data.general$W_27 <- gsub("03년", "3", full_data.general$W_27) full_data.general$W_27 <- gsub("04년", "4", full_data.general$W_27) full_data.general$W_27 <- gsub("05년", "5", full_data.general$W_27) full_data.general$W_27 <- gsub("06년", "6", full_data.general$W_27) full_data.general$W_27 <- gsub("07년", "7", full_data.general$W_27) full_data.general$W_27 <- gsub("08년", "8", full_data.general$W_27) full_data.general$W_27 <- gsub("09년", "9", full_data.general$W_27) full_data.general$W_27 <- gsub("10년", "10", full_data.general$W_27) full_data.general$W_27 <- gsub("11년", "11", full_data.general$W_27) full_data.general$W_27 <- gsub("12년", "12", full_data.general$W_27) full_data.general$W_27 <- gsub("13년", "13", full_data.general$W_27) full_data.general$W_27 <- gsub("14년", "14", full_data.general$W_27) full_data.general$W_27 <- gsub("15년", "15", full_data.general$W_27) full_data.general$W_27 <- gsub("16년", "16", full_data.general$W_27) full_data.general$W_27 <- gsub("17년", "17", full_data.general$W_27) full_data.general$W_27 <- gsub("18년", "18", full_data.general$W_27) full_data.general$W_27 <- gsub("19년", "19", full_data.general$W_27) full_data.general$W_27 <- gsub("20년", "20", full_data.general$W_27) full_data.general$W_27 <- gsub("21년", "21", full_data.general$W_27) full_data.general$W_27 <- gsub("22년", "22", full_data.general$W_27) full_data.general$W_27 <- gsub("23년", "23", full_data.general$W_27) full_data.general$W_27 <- gsub("24년", "24", full_data.general$W_27) full_data.general$W_27 <- gsub("25년", "25", full_data.general$W_27) full_data.general$W_27 <- gsub("26년", "26", full_data.general$W_27) full_data.general$W_27 <- gsub("27년", "27", full_data.general$W_27) full_data.general$W_27 <- gsub("28년", "28", full_data.general$W_27) full_data.general$W_27 <- gsub("29년", "29", full_data.general$W_27) full_data.general$W_27 <- gsub("30년", "30", full_data.general$W_27) full_data.general$W_27 <- gsub("31년", "31", full_data.general$W_27) full_data.general$W_27 <- gsub("32년", "32", full_data.general$W_27) full_data.general$W_27 <- gsub("33년", "33", full_data.general$W_27) full_data.general$W_27 <- gsub("34년", "34", full_data.general$W_27) full_data.general$W_27 <- gsub("35년", "35", full_data.general$W_27) full_data.general$W_27 <- gsub("36년", "36", full_data.general$W_27) full_data.general$W_27 <- gsub("37년", "37", full_data.general$W_27) full_data.general$W_27 <- gsub("38년", "38", full_data.general$W_27) full_data.general$W_27 <- gsub("39년", "39", full_data.general$W_27) full_data.general$W_27 <- gsub("40년", "40", full_data.general$W_27) full_data.general$W_27 <- gsub("41년", "41", full_data.general$W_27) full_data.general$W_27 <- gsub("48년", "48", full_data.general$W_27) full_data.general$W_27 <- gsub("63년", "63", full_data.general$W_27) full_data.priorty$W_27 <- gsub("00년", "0", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("01년", "1", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("02년", "2", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("03년", "3", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("04년", "4", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("05년", "5", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("06년", "6", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("07년", "7", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("08년", "8", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("09년", "9", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("10년", "10", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("11년", "11", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("12년", "12", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("13년", "13", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("14년", "14", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("15년", "15", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("16년", "16", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("17년", "17", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("18년", "18", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("19년", "19", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("20년", "20", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("21년", "21", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("22년", "22", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("23년", "23", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("24년", "24", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("25년", "25", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("26년", "26", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("27년", "27", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("28년", "28", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("29년", "29", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("30년", "30", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("31년", "31", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("32년", "32", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("33년", "33", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("34년", "34", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("35년", "35", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("36년", "36", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("37년", "37", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("38년", "38", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("39년", "39", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("40년", "40", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("41년", "41", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("48년", "48", full_data.priorty$W_27) full_data.priorty$W_27 <- gsub("63년", "63", full_data.priorty$W_27) ## W_38 full_data.general$W_38 <- gsub("해당없음", "N", full_data.general$W_38) full_data.general$W_38 <- gsub("0년", "0", full_data.general$W_38) full_data.general$W_38 <- gsub("1년", "1", full_data.general$W_38) full_data.general$W_38 <- gsub("2년", "2", full_data.general$W_38) full_data.general$W_38 <- gsub("3년", "3", full_data.general$W_38) full_data.general$W_38 <- gsub("4년", "4", full_data.general$W_38) full_data.general$W_38 <- gsub("5년", "5", full_data.general$W_38) full_data.priorty$W_38 <- gsub("해당없음", "N", full_data.priorty$W_38) full_data.priorty$W_38 <- gsub("0년", "0", full_data.priorty$W_38) full_data.priorty$W_38 <- gsub("1년", "1", full_data.priorty$W_38) full_data.priorty$W_38 <- gsub("2년", "2", full_data.priorty$W_38) full_data.priorty$W_38 <- gsub("3년", "3", full_data.priorty$W_38) full_data.priorty$W_38 <- gsub("4년", "4", full_data.priorty$W_38) full_data.priorty$W_38 <- gsub("5년", "5", full_data.priorty$W_38) ## W_39  full_data.general$W_39 <- gsub('해당없음', 'N', full_data.general$W_39) full_data.general$W_39 <- gsub('1순위', '1st', full_data.general$W_39) full_data.general$W_39 <- gsub('2순위', '2nd', full_data.general$W_39) full_data.priorty$W_39 <- gsub('해당없음', 'N', full_data.priorty$W_39) full_data.priorty$W_39 <- gsub('1순위', '1st', full_data.priorty$W_39) full_data.priorty$W_39 <- gsub('2순위', '2nd', full_data.priorty$W_39) ## W_40 full_data.general$W_40 <- gsub('해당없음', 'N', full_data.general$W_40) full_data.general$W_40 <- gsub('당해', 'RESI', full_data.general$W_40) full_data.general$W_40 <- gsub('타', 'N_RESI', full_data.general$W_40) full_data.priorty$W_40 <- gsub('해당없음', 'N', full_data.priorty$W_40) full_data.priorty$W_40 <- gsub('당해', 'RESI', full_data.priorty$W_40) full_data.priorty$W_40 <- gsub('타', 'N_RESI', full_data.priorty$W_40)
highage_26 <- subset(full_data.priorty, W_3 == '26F' & (W_14 == 'PH' | W_14 == 'GH' | W_14 == 'NH'))
highage_36 <- subset(full_data.priorty, W_3 == '36F' & (W_14 == 'PH' | W_14 == 'GH' | W_14 == 'NH'))
highage_46 <- subset(full_data.priorty, W_3 == '46F' & (W_14 == 'PH' | W_14 == 'GH' | W_14 == 'NH'))
write.table(highage_26, 'highage_26.csv')
write.table(highage_36, 'highage_36.csv')
write.table(highage_46, 'highage_46.csv')
disabled_26 <- subset(full_data.priorty, W_3 == '26F' & (W_14 == 'PD' | W_14 == 'GD' | W_14 == 'ND'))
disabled_36 <- subset(full_data.priorty, W_3 == '36F' & (W_14 == 'PD' | W_14 == 'GD' | W_14 == 'ND'))
disabled_46 <- subset(full_data.priorty, W_3 == '46F' & (W_14 == 'PD' | W_14 == 'GD' | W_14 == 'ND'))
write.table(disabled_26, 'disabled_26.csv')
write.table(disabled_36, 'disabled_36.csv')
write.table(disabled_46, 'disabled_46.csv')
married_46 <- subset(full_data.priorty, W_3 == '46F' & (W_14 == 'PM' | W_14 == 'GM' | W_14 == 'NM'))
write.table(married_46, 'married_46.csv')
general_26 <- full_data.general %>% filter(W_3 == "26F" & W_14 %in% c('ND', 'GD', 'GG', 'GH', 'NG', 'NH', 'GC', 'GN', 'NHAN', 'GHAN', 'NN', 'NM', 'NBOOK', 'GBOOK', 'NGEUN', 'GM', 'GGEUN', 'NC'))
general_36 <- full_data.general %>% filter(W_3 == "36F" & W_14 %in% c('ND', 'GD', 'GG', 'GH', 'NG', 'NH', 'GC', 'GN', 'NHAN', 'GHAN', 'NN', 'NM', 'NBOOK', 'GBOOK', 'NGEUN', 'GM', 'GGEUN', 'NC'))
general_46 <- full_data.general %>% filter(W_3 == "46F" & W_14 %in% c('ND', 'GD', 'GG', 'GH', 'NG', 'NH', 'GC', 'GN', 'NHAN', 'GHAN', 'NN', 'NM', 'NBOOK', 'GBOOK', 'NGEUN', 'GM', 'GGEUN', 'NC'))
write.table(general_26, 'general_26.csv')
write.table(general_26, 'general_36.csv')
write.table(general_26, 'general_46.csv')
